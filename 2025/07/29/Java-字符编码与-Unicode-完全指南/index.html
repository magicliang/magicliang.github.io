<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Java å­—ç¬¦ç¼–ç ä¸ Unicode å®Œå…¨æŒ‡å—â€”â€”ä» BMP åˆ°å¢è¡¥å¹³é¢ï¼Œä»ä»£ç å•å…ƒåˆ°å­—å½¢ç°‡ | å®ˆæ ªé˜</title><meta name="author" content="magicliang"><meta name="copyright" content="magicliang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="â€œä¸€ä¸ª char å°±æ˜¯ä¸€ä¸ªå­—ç¬¦â€â€”â€”è¿™ä¸ªç›´è§‰åœ¨ Java ä¸­æ˜¯é”™è¯¯çš„ã€‚ä¸€ä¸ª emoji ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ åœ¨ Java ä¸­å  11 ä¸ª charï¼Œä½†åœ¨ç”¨æˆ·çœ¼ä¸­åªæ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚æœ¬æ–‡å°†ä» Unicode çš„åŸºç¡€æ¦‚å¿µå‡ºå‘ï¼Œæ·±å…¥å‰–æ Java çš„å­—ç¬¦ç¼–ç æœºåˆ¶ï¼Œæ­ç¤º charã€ç ç‚¹ã€ä»£ç å•å…ƒã€å­—å½¢ç°‡ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ã€‚  Part 1: Unicode åŸºç¡€â€”â€”å­—ç¬¦é›†çš„å¤§ä¸€ç»Ÿ ä» ASCII åˆ° Unico">
<meta property="og:type" content="article">
<meta property="og:title" content="Java å­—ç¬¦ç¼–ç ä¸ Unicode å®Œå…¨æŒ‡å—â€”â€”ä» BMP åˆ°å¢è¡¥å¹³é¢ï¼Œä»ä»£ç å•å…ƒåˆ°å­—å½¢ç°‡">
<meta property="og:url" content="https://magicliang.github.io/2025/07/29/Java-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E4%B8%8E-Unicode-%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/index.html">
<meta property="og:site_name" content="å®ˆæ ªé˜">
<meta property="og:description" content="â€œä¸€ä¸ª char å°±æ˜¯ä¸€ä¸ªå­—ç¬¦â€â€”â€”è¿™ä¸ªç›´è§‰åœ¨ Java ä¸­æ˜¯é”™è¯¯çš„ã€‚ä¸€ä¸ª emoji ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ åœ¨ Java ä¸­å  11 ä¸ª charï¼Œä½†åœ¨ç”¨æˆ·çœ¼ä¸­åªæ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚æœ¬æ–‡å°†ä» Unicode çš„åŸºç¡€æ¦‚å¿µå‡ºå‘ï¼Œæ·±å…¥å‰–æ Java çš„å­—ç¬¦ç¼–ç æœºåˆ¶ï¼Œæ­ç¤º charã€ç ç‚¹ã€ä»£ç å•å…ƒã€å­—å½¢ç°‡ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ã€‚  Part 1: Unicode åŸºç¡€â€”â€”å­—ç¬¦é›†çš„å¤§ä¸€ç»Ÿ ä» ASCII åˆ° Unico">
<meta property="og:locale">
<meta property="og:image" content="https://magicliang.github.io/img/wall-paper-95.jpg">
<meta property="article:published_time" content="2025-07-29T07:05:34.000Z">
<meta property="article:modified_time" content="2026-02-07T06:12:39.895Z">
<meta property="article:author" content="magicliang">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Unicode">
<meta property="article:tag" content="å­—ç¬¦ç¼–ç ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://magicliang.github.io/img/wall-paper-95.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Java å­—ç¬¦ç¼–ç ä¸ Unicode å®Œå…¨æŒ‡å—â€”â€”ä» BMP åˆ°å¢è¡¥å¹³é¢ï¼Œä»ä»£ç å•å…ƒåˆ°å­—å½¢ç°‡",
  "url": "https://magicliang.github.io/2025/07/29/Java-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E4%B8%8E-Unicode-%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/",
  "image": "https://magicliang.github.io/img/wall-paper-95.jpg",
  "datePublished": "2025-07-29T07:05:34.000Z",
  "dateModified": "2026-02-07T06:12:39.895Z",
  "author": [
    {
      "@type": "Person",
      "name": "magicliang",
      "url": "https://magicliang.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://magicliang.github.io/2025/07/29/Java-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E4%B8%8E-Unicode-%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: magicliang","link":"Link: ","source":"Source: å®ˆæ ªé˜","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java å­—ç¬¦ç¼–ç ä¸ Unicode å®Œå…¨æŒ‡å—â€”â€”ä» BMP åˆ°å¢è¡¥å¹³é¢ï¼Œä»ä»£ç å•å…ƒåˆ°å­—å½¢ç°‡',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="å®ˆæ ªé˜" type="application/atom+xml">
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      if ($loadingBox.classList.contains('loaded')) return
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()

  if (document.readyState === 'complete') {
    preloader.endLoading()
  } else {
    window.addEventListener('load', preloader.endLoading)
    document.addEventListener('DOMContentLoaded', preloader.endLoading)
    // Add timeout protection: force end after 7 seconds
    setTimeout(preloader.endLoading, 7000)
  }

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/wall-paper-95.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">å®ˆæ ªé˜</span></a><a class="nav-page-title" href="/"><span class="site-name">Java å­—ç¬¦ç¼–ç ä¸ Unicode å®Œå…¨æŒ‡å—â€”â€”ä» BMP åˆ°å¢è¡¥å¹³é¢ï¼Œä»ä»£ç å•å…ƒåˆ°å­—å½¢ç°‡</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">Java å­—ç¬¦ç¼–ç ä¸ Unicode å®Œå…¨æŒ‡å—â€”â€”ä» BMP åˆ°å¢è¡¥å¹³é¢ï¼Œä»ä»£ç å•å…ƒåˆ°å­—å½¢ç°‡</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-07-29T07:05:34.000Z" title="Created 2025-07-29 15:05:34">2025-07-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2026-02-07T06:12:39.895Z" title="Updated 2026-02-07 14:12:39">2026-02-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">4.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>20mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>â€œä¸€ä¸ª <code>char</code> å°±æ˜¯ä¸€ä¸ªå­—ç¬¦â€â€”â€”è¿™ä¸ªç›´è§‰åœ¨ Java ä¸­æ˜¯<strong>é”™è¯¯çš„</strong>ã€‚ä¸€ä¸ª emoji ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ åœ¨ Java ä¸­å  <strong>11 ä¸ª <code>char</code></strong>ï¼Œä½†åœ¨ç”¨æˆ·çœ¼ä¸­åªæ˜¯<strong>ä¸€ä¸ªå­—ç¬¦</strong>ã€‚æœ¬æ–‡å°†ä» Unicode çš„åŸºç¡€æ¦‚å¿µå‡ºå‘ï¼Œæ·±å…¥å‰–æ Java çš„å­—ç¬¦ç¼–ç æœºåˆ¶ï¼Œæ­ç¤º <code>char</code>ã€ç ç‚¹ã€ä»£ç å•å…ƒã€å­—å½¢ç°‡ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ã€‚</p>
<hr>
<h2 id="part-1-unicode-åŸºç¡€-å­—ç¬¦é›†çš„å¤§ä¸€ç»Ÿ">Part 1: Unicode åŸºç¡€â€”â€”å­—ç¬¦é›†çš„å¤§ä¸€ç»Ÿ</h2>
<h3 id="ä»-ascii-åˆ°-unicode-çš„æ¼”è¿›">ä» ASCII åˆ° Unicode çš„æ¼”è¿›</h3>
<table>
<thead>
<tr>
<th>ç¼–ç </th>
<th>å¹´ä»½</th>
<th>å­—ç¬¦æ•°</th>
<th>ä½å®½</th>
<th>è¦†ç›–èŒƒå›´</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ASCII</strong></td>
<td>1963</td>
<td>128</td>
<td>7 ä½</td>
<td>è‹±æ–‡å­—æ¯ã€æ•°å­—ã€æ§åˆ¶å­—ç¬¦</td>
</tr>
<tr>
<td><strong>ISO 8859-1</strong></td>
<td>1987</td>
<td>256</td>
<td>8 ä½</td>
<td>è¥¿æ¬§è¯­è¨€</td>
</tr>
<tr>
<td><strong>GB2312</strong></td>
<td>1980</td>
<td>6,763 æ±‰å­—</td>
<td>åŒå­—èŠ‚</td>
<td>ç®€ä½“ä¸­æ–‡</td>
</tr>
<tr>
<td><strong>GBK</strong></td>
<td>1995</td>
<td>21,886 æ±‰å­—</td>
<td>åŒå­—èŠ‚</td>
<td>ç®€ç¹ä¸­æ–‡</td>
</tr>
<tr>
<td><strong>Shift_JIS</strong></td>
<td>1982</td>
<td>~7,000</td>
<td>å˜é•¿</td>
<td>æ—¥æ–‡</td>
</tr>
<tr>
<td><strong>Unicode 1.0</strong></td>
<td>1991</td>
<td>7,161</td>
<td>16 ä½ï¼ˆæœ€åˆè®¾æƒ³ï¼‰</td>
<td>å¤šè¯­è¨€</td>
</tr>
<tr>
<td><strong>Unicode 16.0</strong></td>
<td>2024</td>
<td>154,998</td>
<td>21 ä½ï¼ˆå®é™…ï¼‰</td>
<td>å…¨çƒæ‰€æœ‰æ–‡å­— + emoji</td>
</tr>
</tbody>
</table>
<p>Unicode ä¹‹å‰çš„ä¸–ç•Œæ˜¯<strong>ç¼–ç ä¸›æ—</strong>ï¼šæ¯ç§è¯­è¨€æœ‰è‡ªå·±çš„ç¼–ç æ ‡å‡†ï¼ŒåŒä¸€ä¸ªå­—èŠ‚åºåˆ—åœ¨ä¸åŒç¼–ç ä¸‹è¡¨ç¤ºä¸åŒçš„å­—ç¬¦ï¼Œå¯¼è‡´**ä¹±ç ï¼ˆMojibakeï¼‰**æ— å¤„ä¸åœ¨ã€‚</p>
<p>Unicode çš„ç›®æ ‡ï¼š<strong>ä¸ºä¸–ç•Œä¸Šæ¯ä¸€ä¸ªå­—ç¬¦åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ç¼–å·ï¼ˆç ç‚¹ï¼‰</strong>ã€‚</p>
<h3 id="ç ç‚¹-code-point">ç ç‚¹ï¼ˆCode Pointï¼‰</h3>
<p><strong>ç ç‚¹</strong>æ˜¯ Unicode ä¸ºæ¯ä¸ªå­—ç¬¦åˆ†é…çš„å”¯ä¸€ç¼–å·ï¼Œç”¨ <code>U+</code> å‰ç¼€åŠ åå…­è¿›åˆ¶è¡¨ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>ç ç‚¹</th>
<th>åç§°</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>U+0041</td>
<td>LATIN CAPITAL LETTER A</td>
</tr>
<tr>
<td>ä¸­</td>
<td>U+4E2D</td>
<td>CJK UNIFIED IDEOGRAPH-4E2D</td>
</tr>
<tr>
<td>ğŸ˜€</td>
<td>U+1F600</td>
<td>GRINNING FACE</td>
</tr>
<tr>
<td>ğ„</td>
<td>U+1D11E</td>
<td>MUSICAL SYMBOL G CLEF</td>
</tr>
</tbody>
</table>
<p>ç ç‚¹èŒƒå›´ï¼š<strong>U+0000 åˆ° U+10FFFF</strong>ï¼Œå…± 1,114,112 ä¸ªä½ç½®ï¼ˆ21 ä½ï¼‰ã€‚</p>
<h3 id="unicode-å¹³é¢">Unicode å¹³é¢</h3>
<p>Unicode å°†ç ç‚¹ç©ºé—´åˆ’åˆ†ä¸º <strong>17 ä¸ªå¹³é¢ï¼ˆPlaneï¼‰</strong>ï¼Œæ¯ä¸ªå¹³é¢ 65,536ï¼ˆ2^16ï¼‰ä¸ªç ç‚¹ï¼š</p>
<h3 id="ä»£ç å¹³é¢-code-plane">ä»£ç å¹³é¢ï¼ˆCode Planeï¼‰</h3>
<p>Unicode ç ç‚¹ç©ºé—´è¢«åˆ†ä¸º 17 ä¸ªå¹³é¢ï¼ˆPlane 0-16ï¼‰ï¼Œæ¯ä¸ªå¹³é¢å®¹çº³ 65,536 ä¸ªç ç‚¹ã€‚è¿™ 17 ä¸ªå¹³é¢å…±èƒ½è¡¨ç¤º 1,114,112 ä¸ªå­—ç¬¦ã€‚</p>
<table>
<thead>
<tr>
<th>å¹³é¢</th>
<th>åç§°</th>
<th>ç ç‚¹èŒƒå›´</th>
<th>è¯´æ˜</th>
<th>åŒ…å«å­—ç¬¦ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Plane 0</strong></td>
<td>BMP</td>
<td>U+0000 - U+FFFF</td>
<td>åŸºæœ¬å¤šæ–‡ç§å¹³é¢</td>
<td>ç»å¤§å¤šæ•°å¸¸ç”¨å­—ç¬¦ï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€emoji ç­‰ï¼‰</td>
</tr>
<tr>
<td><strong>Plane 1</strong></td>
<td>SMP</td>
<td>U+10000 - U+1FFFF</td>
<td>è¡¥å……å¤šæ–‡ç§å¹³é¢</td>
<td>å†å²æ–‡å­—ã€emojiã€éŸ³ä¹ç¬¦å·ç­‰</td>
</tr>
<tr>
<td><strong>Plane 2</strong></td>
<td>SIP</td>
<td>U+20000 - U+2FFFF</td>
<td>è¡¥å……è¡¨æ„å¹³é¢</td>
<td>æ‰©å±•æ±‰å­—</td>
</tr>
<tr>
<td><strong>Plane 3-13</strong></td>
<td>-</td>
<td>U+30000 - U+DFFFF</td>
<td>ä¿ç•™</td>
<td>æœªä½¿ç”¨</td>
</tr>
<tr>
<td><strong>Plane 14</strong></td>
<td>SSP</td>
<td>U+E0000 - U+EFFFF</td>
<td>è¡¥å……ä¸“ç”¨å¹³é¢</td>
<td>ç”¨äºç§äººè‡ªå®šä¹‰å­—ç¬¦</td>
</tr>
<tr>
<td><strong>Plane 15-16</strong></td>
<td>PUA</td>
<td>U+F0000 - U+10FFFF</td>
<td>ç§äººä½¿ç”¨åŒº</td>
<td>ç”¨äºç§äººè‡ªå®šä¹‰å­—ç¬¦</td>
</tr>
</tbody>
</table>
<p><strong>BMP ä¹‹å¤–çš„å­—ç¬¦</strong>ï¼ˆU+10000 åŠä»¥ä¸Šï¼‰è¢«ç§°ä¸º<strong>å¢è¡¥å­—ç¬¦ï¼ˆSupplementary Charactersï¼‰</strong>ï¼Œå®ƒä»¬åœ¨ Java ä¸­éœ€è¦<strong>ä¸¤ä¸ª <code>char</code></strong> æ¥è¡¨ç¤ºã€‚</p>
<hr>
<h2 id="part-2-utf-16-ä¸-java-çš„-char">Part 2: UTF-16 ä¸ Java çš„ char</h2>
<h3 id="ä¸ºä»€ä¹ˆ-java-é€‰æ‹©äº†-utf-16">ä¸ºä»€ä¹ˆ Java é€‰æ‹©äº† UTF-16</h3>
<p>Java è¯ç”Ÿäº 1995 å¹´ï¼Œå½“æ—¶ Unicode è¿˜åªæœ‰ 65,536 ä¸ªå­—ç¬¦ï¼ˆBMPï¼‰ï¼Œè®¾è®¡è€…è®¤ä¸º 16 ä½è¶³ä»¥å®¹çº³æ‰€æœ‰å­—ç¬¦ã€‚å› æ­¤ Java çš„ <code>char</code> è¢«è®¾è®¡ä¸º <strong>16 ä½æ— ç¬¦å·æ•´æ•°</strong>ï¼Œç›´æ¥å¯¹åº”ä¸€ä¸ª Unicode ç ç‚¹ã€‚</p>
<p>ä½† Unicode 2.0ï¼ˆ1996 å¹´ï¼‰å¼•å…¥äº†å¢è¡¥å¹³é¢ï¼Œç ç‚¹èŒƒå›´æ‰©å±•åˆ° U+10FFFFï¼Œè¶…å‡ºäº† 16 ä½çš„è¡¨ç¤ºèƒ½åŠ›ã€‚Java ä¸å¾—ä¸å¼•å…¥**ä»£ç†å¯¹ï¼ˆSurrogate Pairï¼‰**æœºåˆ¶æ¥å¤„ç†å¢è¡¥å­—ç¬¦ã€‚</p>
<h3 id="ä»£ç†å¯¹-surrogate-pair">ä»£ç†å¯¹ï¼ˆSurrogate Pairï¼‰</h3>
<p>å¯¹äº BMP ä¹‹å¤–çš„å­—ç¬¦ï¼ˆU+10000 ~ U+10FFFFï¼‰ï¼ŒUTF-16 ä½¿ç”¨ä¸¤ä¸ª 16 ä½ä»£ç å•å…ƒæ¥è¡¨ç¤ºï¼š</p>
<p><strong>ç¼–ç ç®—æ³•</strong>ï¼š</p>
<ol>
<li>å°†ç ç‚¹å‡å» 0x10000ï¼Œå¾—åˆ°ä¸€ä¸ª 20 ä½çš„å€¼</li>
<li>é«˜ 10 ä½åŠ ä¸Š 0xD800ï¼Œå¾—åˆ°<strong>é«˜ä»£ç†ï¼ˆHigh Surrogateï¼‰</strong>ï¼šèŒƒå›´ 0xD800 ~ 0xDBFF</li>
<li>ä½ 10 ä½åŠ ä¸Š 0xDC00ï¼Œå¾—åˆ°<strong>ä½ä»£ç†ï¼ˆLow Surrogateï¼‰</strong>ï¼šèŒƒå›´ 0xDC00 ~ 0xDFFF</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼šğŸ˜€ï¼ˆU+1F600ï¼‰çš„ç¼–ç </strong></p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">ç ç‚¹ï¼š<span class="hljs-number">0x1F600</span><br>å‡å» <span class="hljs-number">0x10000</span>ï¼š<span class="hljs-number">0xF600</span> = <span class="hljs-number">0000</span> <span class="hljs-number">1111</span> <span class="hljs-number">0110</span> <span class="hljs-number">0000</span> <span class="hljs-number">0000</span>ï¼ˆ<span class="hljs-number">20</span> ä½ï¼‰<br>é«˜ <span class="hljs-number">10</span> ä½ï¼š<span class="hljs-number">0000</span> <span class="hljs-number">1111</span> <span class="hljs-number">01</span> = <span class="hljs-number">0x3D</span> â†’ é«˜ä»£ç† = <span class="hljs-number">0xD800</span> + <span class="hljs-number">0x3D</span> = <span class="hljs-number">0xD83D</span><br>ä½ <span class="hljs-number">10</span> ä½ï¼š<span class="hljs-number">10</span> <span class="hljs-number">0000</span> <span class="hljs-number">0000</span> = <span class="hljs-number">0x200</span> â†’ ä½ä»£ç† = <span class="hljs-number">0xDC00</span> + <span class="hljs-number">0x200</span> = <span class="hljs-number">0xDE00</span><br><br>UTF-<span class="hljs-number">16</span> ç¼–ç ï¼š<span class="hljs-number">0xD83D</span> <span class="hljs-number">0xDE00</span><br></code></pre></td></tr></table></figure>
<h3 id="ä»£ç å•å…ƒ-vs-ç ç‚¹-vs-å­—å½¢ç°‡">ä»£ç å•å…ƒ vs ç ç‚¹ vs å­—å½¢ç°‡</h3>
<p>è¿™æ˜¯ç†è§£ Java å­—ç¬¦å¤„ç†çš„å…³é”®å±‚æ¬¡æ¨¡å‹ï¼š</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs excel">å±‚æ¬¡ <span class="hljs-symbol">4:</span> å­—å½¢ç°‡ï¼ˆGrapheme Clusterï¼‰â€”â€” ç”¨æˆ·çœ‹åˆ°çš„<span class="hljs-string">&quot;ä¸€ä¸ªå­—ç¬¦&quot;</span><br>         ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ = <span class="hljs-number">1</span> ä¸ªå­—å½¢ç°‡<br><br>å±‚æ¬¡ <span class="hljs-symbol">3:</span> ç ç‚¹ï¼ˆ<span class="hljs-built_in">Code</span> Pointï¼‰â€”â€” <span class="hljs-built_in">Unicode</span> åˆ†é…çš„ç¼–å·<br>         ğŸ‘¨ + ZWJ + ğŸ‘© + ZWJ + ğŸ‘§ + ZWJ + ğŸ‘¦ = <span class="hljs-number">7</span> ä¸ªç ç‚¹<br><br>å±‚æ¬¡ <span class="hljs-symbol">2:</span> ä»£ç å•å…ƒï¼ˆ<span class="hljs-built_in">Code</span> Unitï¼‰â€”â€” Java çš„ <span class="hljs-built_in">char</span><br>         æ¯ä¸ª emoji ç ç‚¹ = <span class="hljs-number">2</span> ä¸ª <span class="hljs-built_in">char</span>ï¼ŒZWJ = <span class="hljs-number">1</span> ä¸ª <span class="hljs-built_in">char</span> â†’ å…± <span class="hljs-number">11</span> ä¸ª <span class="hljs-built_in">char</span><br><br>å±‚æ¬¡ <span class="hljs-symbol">1:</span> å­—èŠ‚ï¼ˆByteï¼‰â€”â€” å­˜å‚¨å•ä½<br>         UTF-<span class="hljs-number">8</span> ç¼–ç ä¸‹æ¯ä¸ª emoji = <span class="hljs-number">4</span> å­—èŠ‚ â†’ å…± <span class="hljs-number">25</span> å­—èŠ‚<br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>æ¦‚å¿µ</th>
<th>Java ç±»å‹</th>
<th>å¤§å°</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å­—èŠ‚</strong></td>
<td><code>byte</code></td>
<td>8 ä½</td>
<td>UTF-8 çš„ä¸€ä¸ªå­—èŠ‚</td>
</tr>
<tr>
<td><strong>ä»£ç å•å…ƒ</strong></td>
<td><code>char</code></td>
<td>16 ä½</td>
<td>UTF-16 çš„ä¸€ä¸ªå•å…ƒ</td>
</tr>
<tr>
<td><strong>ç ç‚¹</strong></td>
<td><code>int</code></td>
<td>21 ä½ï¼ˆå­˜åœ¨ 32 ä½ int ä¸­ï¼‰</td>
<td>U+1F600</td>
</tr>
<tr>
<td><strong>å­—å½¢ç°‡</strong></td>
<td>æ— å†…ç½®ç±»å‹</td>
<td>å¯å˜</td>
<td>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</td>
</tr>
</tbody>
</table>
<h3 id="java-ä¸­çš„é™·é˜±">Java ä¸­çš„é™·é˜±</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">emoji</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ğŸ˜€&quot;</span>;<br><br><span class="hljs-comment">// âŒ é”™è¯¯çš„é•¿åº¦</span><br>System.out.println(emoji.length());        <span class="hljs-comment">// 2ï¼ˆä»£ç å•å…ƒæ•°ï¼‰</span><br>System.out.println(emoji.charAt(<span class="hljs-number">0</span>));       <span class="hljs-comment">// ?ï¼ˆé«˜ä»£ç†ï¼Œæ— æ„ä¹‰çš„åŠä¸ªå­—ç¬¦ï¼‰</span><br>System.out.println(emoji.charAt(<span class="hljs-number">1</span>));       <span class="hljs-comment">// ?ï¼ˆä½ä»£ç†ï¼Œæ— æ„ä¹‰çš„åŠä¸ªå­—ç¬¦ï¼‰</span><br><br><span class="hljs-comment">// âœ… æ­£ç¡®çš„ç ç‚¹æ“ä½œ</span><br>System.out.println(emoji.codePointCount(<span class="hljs-number">0</span>, emoji.length()));  <span class="hljs-comment">// 1</span><br>System.out.println(emoji.codePointAt(<span class="hljs-number">0</span>));  <span class="hljs-comment">// 128512 (0x1F600)</span><br><br><span class="hljs-comment">// âœ… éå†ç ç‚¹</span><br>emoji.codePoints().forEach(cp -&gt; &#123;<br>    System.out.println(<span class="hljs-string">&quot;U+&quot;</span> + Integer.toHexString(cp).toUpperCase());<br>&#125;);<br><span class="hljs-comment">// è¾“å‡ºï¼šU+1F600</span><br></code></pre></td></tr></table></figure>
<hr>
<h2 id="part-3-utf-8-utf-16-utf-32-å¯¹æ¯”">Part 3: UTF-8ã€UTF-16ã€UTF-32 å¯¹æ¯”</h2>
<h3 id="utf-8-ç¼–ç è§„åˆ™">UTF-8 ç¼–ç è§„åˆ™</h3>
<p>UTF-8 æ˜¯<strong>å˜é•¿ç¼–ç </strong>ï¼Œä½¿ç”¨ 1-4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç ç‚¹ï¼š</p>
<table>
<thead>
<tr>
<th>ç ç‚¹èŒƒå›´</th>
<th>å­—èŠ‚æ•°</th>
<th>ç¼–ç æ ¼å¼</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>U+0000 ~ U+007F</td>
<td>1</td>
<td><code>0xxxxxxx</code></td>
<td>A â†’ <code>0x41</code></td>
</tr>
<tr>
<td>U+0080 ~ U+07FF</td>
<td>2</td>
<td><code>110xxxxx 10xxxxxx</code></td>
<td>Ã© â†’ <code>0xC3 0xA9</code></td>
</tr>
<tr>
<td>U+0800 ~ U+FFFF</td>
<td>3</td>
<td><code>1110xxxx 10xxxxxx 10xxxxxx</code></td>
<td>ä¸­ â†’ <code>0xE4 0xB8 0xAD</code></td>
</tr>
<tr>
<td>U+10000 ~ U+10FFFF</td>
<td>4</td>
<td><code>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</code></td>
<td>ğŸ˜€ â†’ <code>0xF0 0x9F 0x98 0x80</code></td>
</tr>
</tbody>
</table>
<p><strong>UTF-8 çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>ASCII å…¼å®¹</strong>ï¼šASCII å­—ç¬¦åªéœ€ 1 å­—èŠ‚ï¼Œä¸ ASCII ç¼–ç å®Œå…¨ç›¸åŒ</li>
<li><strong>æ— å­—èŠ‚åºé—®é¢˜</strong>ï¼šä¸éœ€è¦ BOMï¼ˆByte Order Markï¼‰</li>
<li><strong>è‡ªåŒæ­¥</strong>ï¼šUTF-8æ˜¯ä¸€ç§å˜é•¿ç¼–ç æ–¹å¼ï¼Œå…¶ç‰¹ç‚¹åœ¨äºèƒ½å¤Ÿé€šè¿‡å‰å¯¼å­—èŠ‚å’Œåç»­å­—èŠ‚çš„ä¸åŒæ¨¡å¼æ¥è¯†åˆ«å­—ç¬¦è¾¹ç•Œï¼Œä»è€Œå®ç°å¯¹ä¸åŒé•¿åº¦å­—ç¬¦çš„æœ‰æ•ˆè§£æä¸å¤„ç†ã€‚</li>
</ul>
<h3 id="ä¸‰ç§-utf-ç¼–ç å¯¹æ¯”">ä¸‰ç§ UTF ç¼–ç å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th>ç»´åº¦</th>
<th>UTF-8</th>
<th>UTF-16</th>
<th>UTF-32</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ä»£ç å•å…ƒå¤§å°</strong></td>
<td>8 ä½</td>
<td>16 ä½</td>
<td>32 ä½</td>
</tr>
<tr>
<td><strong>å˜é•¿/å®šé•¿</strong></td>
<td>å˜é•¿ï¼ˆ1-4 å­—èŠ‚ï¼‰</td>
<td>å˜é•¿ï¼ˆ2 æˆ– 4 å­—èŠ‚ï¼‰</td>
<td>å®šé•¿ï¼ˆ4 å­—èŠ‚ï¼‰</td>
</tr>
<tr>
<td><strong>ASCII æ•ˆç‡</strong></td>
<td>æœ€é«˜ï¼ˆ1 å­—èŠ‚ï¼‰</td>
<td>ä½ï¼ˆ2 å­—èŠ‚ï¼‰</td>
<td>æœ€ä½ï¼ˆ4 å­—èŠ‚ï¼‰</td>
</tr>
<tr>
<td><strong>ä¸­æ–‡æ•ˆç‡</strong></td>
<td>ä¸­ï¼ˆ3 å­—èŠ‚ï¼‰</td>
<td>é«˜ï¼ˆ2 å­—èŠ‚ï¼‰</td>
<td>ä½ï¼ˆ4 å­—èŠ‚ï¼‰</td>
</tr>
<tr>
<td><strong>emoji æ•ˆç‡</strong></td>
<td>4 å­—èŠ‚</td>
<td>4 å­—èŠ‚</td>
<td>4 å­—èŠ‚</td>
</tr>
<tr>
<td><strong>å­—èŠ‚åº</strong></td>
<td>æ— </td>
<td>æœ‰ï¼ˆBE/LEï¼‰</td>
<td>æœ‰ï¼ˆBE/LEï¼‰</td>
</tr>
<tr>
<td><strong>ä½¿ç”¨åœºæ™¯</strong></td>
<td>ç½‘ç»œä¼ è¾“ã€æ–‡ä»¶å­˜å‚¨</td>
<td>Java/C# å†…éƒ¨</td>
<td>å†…éƒ¨å¤„ç†ï¼ˆå°‘ç”¨ï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="bom-byte-order-mark">BOMï¼ˆByte Order Markï¼‰</h3>
<p>UTF-16 å’Œ UTF-32 æœ‰**å¤§ç«¯ï¼ˆBEï¼‰<strong>å’Œ</strong>å°ç«¯ï¼ˆLEï¼‰**ä¸¤ç§å­—èŠ‚åºã€‚BOM æ˜¯æ–‡ä»¶å¼€å¤´çš„ç‰¹æ®Šå­—èŠ‚ï¼Œç”¨äºæ ‡è¯†å­—èŠ‚åºï¼š</p>
<table>
<thead>
<tr>
<th>ç¼–ç </th>
<th>BOM å­—èŠ‚</th>
</tr>
</thead>
<tbody>
<tr>
<td>UTF-8</td>
<td><code>EF BB BF</code>ï¼ˆå¯é€‰ï¼Œä¸æ¨èï¼‰</td>
</tr>
<tr>
<td>UTF-16 BE</td>
<td><code>FE FF</code></td>
</tr>
<tr>
<td>UTF-16 LE</td>
<td><code>FF FE</code></td>
</tr>
<tr>
<td>UTF-32 BE</td>
<td><code>00 00 FE FF</code></td>
</tr>
<tr>
<td>UTF-32 LE</td>
<td><code>FF FE 00 00</code></td>
</tr>
</tbody>
</table>
<p>Java çš„ <code>InputStreamReader</code> ä¸ä¼šè‡ªåŠ¨å¤„ç† BOMï¼Œéœ€è¦æ‰‹åŠ¨è·³è¿‡æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<hr>
<h2 id="part-4-java-å­—ç¬¦ä¸²çš„å†…éƒ¨å®ç°">Part 4: Java å­—ç¬¦ä¸²çš„å†…éƒ¨å®ç°</h2>
<h3 id="java-9-ä¹‹å‰ï¼šchar-å­˜å‚¨">Java 9 ä¹‹å‰ï¼šchar[] å­˜å‚¨</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Java 8 åŠä¹‹å‰</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">char</span>[] value;  <span class="hljs-comment">// UTF-16 ç¼–ç </span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> hash;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ¯ä¸ªå­—ç¬¦å›ºå®šå  2 å­—èŠ‚ï¼Œå³ä½¿æ˜¯çº¯ ASCII å­—ç¬¦ä¸²ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<h3 id="java-9-ï¼šcompact-strings">Java 9+ï¼šCompact Strings</h3>
<p>Java 9 å¼•å…¥äº†**ç´§å‡‘å­—ç¬¦ä¸²ï¼ˆCompact Stringsï¼‰**ä¼˜åŒ–ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Java 9+</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">byte</span>[] value;  <span class="hljs-comment">// åº•å±‚å­˜å‚¨</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">byte</span> coder;    <span class="hljs-comment">// ç¼–ç æ ‡è¯†ï¼šLATIN1(0) æˆ– UTF16(1)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> hash;<br>&#125;<br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>coder å€¼</th>
<th>ç¼–ç </th>
<th>æ¯å­—ç¬¦å­—èŠ‚æ•°</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 (LATIN1)</td>
<td>ISO 8859-1</td>
<td>1 å­—èŠ‚</td>
<td>çº¯ ASCII/Latin-1 å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>1 (UTF16)</td>
<td>UTF-16</td>
<td>2 å­—èŠ‚</td>
<td>åŒ…å«é Latin-1 å­—ç¬¦</td>
</tr>
</tbody>
</table>
<p><strong>å†…å­˜èŠ‚çœ</strong>ï¼šå¯¹äºè‹±æ–‡ä¸ºä¸»çš„åº”ç”¨ï¼Œå­—ç¬¦ä¸²å†…å­˜å ç”¨å‡å°‘çº¦ <strong>40-50%</strong>ã€‚</p>
<h3 id="å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§">å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§</h3>
<p>Java çš„ <code>String</code> æ˜¯<strong>ä¸å¯å˜çš„ï¼ˆimmutableï¼‰</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello&quot;</span>;<br>s = s + <span class="hljs-string">&quot; World&quot;</span>;  <span class="hljs-comment">// åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ String å¯¹è±¡ï¼ŒåŸæ¥çš„ &quot;Hello&quot; ä¸å˜</span><br></code></pre></td></tr></table></figure>
<p>ä¸å¯å˜æ€§çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šå¤šçº¿ç¨‹å¯ä»¥å®‰å…¨åœ°å…±äº«å­—ç¬¦ä¸²</li>
<li><strong>å“ˆå¸Œç¼“å­˜</strong>ï¼šhashCode åªéœ€è®¡ç®—ä¸€æ¬¡</li>
<li><strong>å­—ç¬¦ä¸²æ± </strong>ï¼šç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²å¯ä»¥å…±äº«åŒä¸€ä¸ªå¯¹è±¡</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šä½œä¸º HashMap çš„ keyã€ç±»åã€æ–‡ä»¶è·¯å¾„ç­‰ä¸ä¼šè¢«æ„å¤–ä¿®æ”¹</li>
</ul>
<h3 id="å­—ç¬¦ä¸²æ± -string-pool">å­—ç¬¦ä¸²æ± ï¼ˆString Poolï¼‰</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello&quot;</span>;           <span class="hljs-comment">// å­—ç¬¦ä¸²æ± ä¸­çš„å¯¹è±¡</span><br><span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello&quot;</span>;           <span class="hljs-comment">// åŒä¸€ä¸ªå¯¹è±¡</span><br><span class="hljs-type">String</span> <span class="hljs-variable">s3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;Hello&quot;</span>);  <span class="hljs-comment">// å †ä¸Šçš„æ–°å¯¹è±¡</span><br><span class="hljs-type">String</span> <span class="hljs-variable">s4</span> <span class="hljs-operator">=</span> s3.intern();       <span class="hljs-comment">// è¿”å›æ± ä¸­çš„å¯¹è±¡</span><br><br>System.out.println(s1 == s2);  <span class="hljs-comment">// trueï¼ˆåŒä¸€ä¸ªå¯¹è±¡ï¼‰</span><br>System.out.println(s1 == s3);  <span class="hljs-comment">// falseï¼ˆä¸åŒå¯¹è±¡ï¼‰</span><br>System.out.println(s1 == s4);  <span class="hljs-comment">// trueï¼ˆintern è¿”å›æ± ä¸­å¯¹è±¡ï¼‰</span><br></code></pre></td></tr></table></figure>
<p>Java 7 ä¹‹å‰ï¼Œå­—ç¬¦ä¸²æ± ä½äº<strong>æ°¸ä¹…ä»£ï¼ˆPermGenï¼‰</strong>ï¼›Java 7+ ç§»è‡³<strong>å †ï¼ˆHeapï¼‰</strong>ï¼Œé¿å…äº† PermGen OOMã€‚</p>
<h3 id="string-intern-çš„æ€§èƒ½é™·é˜±ä¸è°ƒä¼˜">String.intern() çš„æ€§èƒ½é™·é˜±ä¸è°ƒä¼˜</h3>
<p><code>String.intern()</code> æ–¹æ³•ä¼šå°†å­—ç¬¦ä¸²æ”¾å…¥å­—ç¬¦ä¸²æ± å¹¶è¿”å›æ± ä¸­çš„å¼•ç”¨ã€‚åœ¨é«˜æ€§èƒ½åœºæ™¯ä¸‹ä½¿ç”¨ <code>intern()</code> éœ€è¦æ³¨æ„ä»¥ä¸‹é—®é¢˜ï¼š</p>
<p><strong>æ€§èƒ½é™·é˜±</strong>ï¼š</p>
<ol>
<li><strong>é”ç«äº‰</strong>ï¼šå­—ç¬¦ä¸²æ± å†…éƒ¨ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹å¯èƒ½æˆä¸ºç“¶é¢ˆ</li>
<li><strong>å†…å­˜å‹åŠ›</strong>ï¼šå¤§é‡ä½¿ç”¨ <code>intern()</code> ä¼šå¯¼è‡´å­—ç¬¦ä¸²æ± è†¨èƒ€ï¼Œå¢åŠ  GC å‹åŠ›</li>
<li><strong>Full GC é¢‘ç¹</strong>ï¼šå­—ç¬¦ä¸²æ± åœ¨è€å¹´ä»£ï¼Œé¢‘ç¹æ‰©å®¹å¯èƒ½è§¦å‘ Full GC</li>
</ol>
<p><strong>è°ƒä¼˜å‚æ•°</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è°ƒæ•´å­—ç¬¦ä¸²æ± å¤§å°ï¼ˆé»˜è®¤ 60013ï¼‰</span><br>-XX:StringTableSize=100000<br><br><span class="hljs-comment"># ç›‘æ§å­—ç¬¦ä¸²æ± çŠ¶æ€</span><br>-XX:+PrintStringTableStatistics<br></code></pre></td></tr></table></figure>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>ä»…å¯¹é‡å¤å‡ºç°çš„é«˜é¢‘å­—ç¬¦ä¸²ä½¿ç”¨ <code>intern()</code>ï¼ˆå¦‚é…ç½®é”®ã€æ ‡è¯†ç¬¦ï¼‰</li>
<li>é¿å…åœ¨å¾ªç¯ä¸­å¯¹åŠ¨æ€ç”Ÿæˆçš„å­—ç¬¦ä¸²è°ƒç”¨ <code>intern()</code></li>
<li>è€ƒè™‘ä½¿ç”¨ <code>ConcurrentHashMap</code> ç­‰æ›¿ä»£æ–¹æ¡ˆå®ç°è‡ªå®šä¹‰ç¼“å­˜</li>
</ul>
<hr>
<h2 id="part-5-æ­£ç¡®å¤„ç†-unicode-çš„-java-api">Part 5: æ­£ç¡®å¤„ç† Unicode çš„ Java API</h2>
<h3 id="ç ç‚¹çº§åˆ«çš„æ“ä½œ">ç ç‚¹çº§åˆ«çš„æ“ä½œ</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello ğŸ˜€ ä¸–ç•Œ&quot;</span>;<br><br><span class="hljs-comment">// âŒ é”™è¯¯ï¼šåŸºäº char çš„éå†</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; text.length(); i++) &#123;<br>    <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> text.charAt(i);  <span class="hljs-comment">// å¯èƒ½å¾—åˆ°åŠä¸ªä»£ç†å¯¹</span><br>&#125;<br><br><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåŸºäºç ç‚¹çš„éå†</span><br>text.codePoints().forEach(codePoint -&gt; &#123;<br>    System.out.println(<br>        <span class="hljs-string">&quot;U+&quot;</span> + Integer.toHexString(codePoint).toUpperCase() +<br>        <span class="hljs-string">&quot; â†’ &quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(Character.toChars(codePoint))<br>    );<br>&#125;);<br><br><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç ç‚¹æ•°é‡</span><br><span class="hljs-type">int</span> <span class="hljs-variable">charCount</span> <span class="hljs-operator">=</span> text.length();                              <span class="hljs-comment">// 10ï¼ˆä»£ç å•å…ƒæ•°ï¼‰</span><br><span class="hljs-type">int</span> <span class="hljs-variable">codePointCount</span> <span class="hljs-operator">=</span> text.codePointCount(<span class="hljs-number">0</span>, text.length()); <span class="hljs-comment">// 9ï¼ˆç ç‚¹æ•°ï¼‰</span><br></code></pre></td></tr></table></figure>
<h3 id="ç ç‚¹ä¸-char-çš„è½¬æ¢">ç ç‚¹ä¸ char çš„è½¬æ¢</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ç ç‚¹ â†’ char æ•°ç»„</span><br><span class="hljs-type">int</span> <span class="hljs-variable">codePoint</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x1F600</span>;  <span class="hljs-comment">// ğŸ˜€</span><br><span class="hljs-type">char</span>[] chars = Character.toChars(codePoint);<br><span class="hljs-comment">// chars = &#123;0xD83D, 0xDE00&#125;ï¼ˆä»£ç†å¯¹ï¼‰</span><br><br><span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯å¢è¡¥å­—ç¬¦</span><br><span class="hljs-type">boolean</span> <span class="hljs-variable">isSupplementary</span> <span class="hljs-operator">=</span> Character.isSupplementaryCodePoint(codePoint);  <span class="hljs-comment">// true</span><br><br><span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ä»£ç†å¯¹çš„ä¸€éƒ¨åˆ†</span><br><span class="hljs-type">boolean</span> <span class="hljs-variable">isHighSurrogate</span> <span class="hljs-operator">=</span> Character.isHighSurrogate(<span class="hljs-string">&#x27;\uD83D&#x27;</span>);  <span class="hljs-comment">// true</span><br><span class="hljs-type">boolean</span> <span class="hljs-variable">isLowSurrogate</span> <span class="hljs-operator">=</span> Character.isLowSurrogate(<span class="hljs-string">&#x27;\uDE00&#x27;</span>);    <span class="hljs-comment">// true</span><br><br><span class="hljs-comment">// ä»ä»£ç†å¯¹è¿˜åŸç ç‚¹</span><br><span class="hljs-type">int</span> <span class="hljs-variable">restored</span> <span class="hljs-operator">=</span> Character.toCodePoint(<span class="hljs-string">&#x27;\uD83D&#x27;</span>, <span class="hljs-string">&#x27;\uDE00&#x27;</span>);  <span class="hljs-comment">// 0x1F600</span><br></code></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²åè½¬çš„æ­£ç¡®å®ç°">å­—ç¬¦ä¸²åè½¬çš„æ­£ç¡®å®ç°</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæœ´ç´ åè½¬ä¼šæ‹†æ•£ä»£ç†å¯¹</span><br><span class="hljs-type">String</span> <span class="hljs-variable">broken</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-string">&quot;Hello ğŸ˜€&quot;</span>).reverse().toString();<br><span class="hljs-comment">// StringBuilder.reverse() å®é™…ä¸Šå·²ç»æ­£ç¡®å¤„ç†äº†ä»£ç†å¯¹ï¼</span><br><br><span class="hljs-comment">// âœ… æ‰‹åŠ¨å®ç°ï¼ˆå±•ç¤ºåŸç†ï¼‰</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">reverseByCodePoints</span><span class="hljs-params">(String input)</span> &#123;<br>    <span class="hljs-type">int</span>[] codePoints = input.codePoints().toArray();<br>    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> codePoints.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        result.appendCodePoint(codePoints[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> result.toString();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š<code>StringBuilder.reverse()</code> ä» Java 1.5 å¼€å§‹å°±æ­£ç¡®å¤„ç†äº†ä»£ç†å¯¹ã€‚</p>
<h3 id="å­—ç¬¦ä¸²æˆªå–çš„æ­£ç¡®å®ç°">å­—ç¬¦ä¸²æˆªå–çš„æ­£ç¡®å®ç°</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// âŒ å±é™©ï¼šsubstring å¯èƒ½ä»ä»£ç†å¯¹ä¸­é—´æˆªæ–­</span><br><span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;AğŸ˜€B&quot;</span>;<br><span class="hljs-type">String</span> <span class="hljs-variable">sub</span> <span class="hljs-operator">=</span> text.substring(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// &quot;A&quot; + é«˜ä»£ç†ï¼ˆæŸåçš„å­—ç¬¦ä¸²ï¼ï¼‰</span><br><br><span class="hljs-comment">// âœ… å®‰å…¨æˆªå–ï¼šæŒ‰ç ç‚¹æˆªå–</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">substringByCodePoints</span><span class="hljs-params">(String str, <span class="hljs-type">int</span> beginIndex, <span class="hljs-type">int</span> endIndex)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">charBegin</span> <span class="hljs-operator">=</span> str.offsetByCodePoints(<span class="hljs-number">0</span>, beginIndex);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">charEnd</span> <span class="hljs-operator">=</span> str.offsetByCodePoints(<span class="hljs-number">0</span>, endIndex);<br>    <span class="hljs-keyword">return</span> str.substring(charBegin, charEnd);<br>&#125;<br><br>substringByCodePoints(<span class="hljs-string">&quot;AğŸ˜€B&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// &quot;AğŸ˜€&quot;</span><br></code></pre></td></tr></table></figure>
<hr>
<h2 id="part-6-å­—å½¢ç°‡-ç”¨æˆ·çœ¼ä¸­çš„-å­—ç¬¦">Part 6: å­—å½¢ç°‡â€”â€”ç”¨æˆ·çœ¼ä¸­çš„&quot;å­—ç¬¦&quot;</h2>
<h3 id="ä»€ä¹ˆæ˜¯å­—å½¢ç°‡">ä»€ä¹ˆæ˜¯å­—å½¢ç°‡</h3>
<p><strong>å­—å½¢ç°‡ï¼ˆGrapheme Clusterï¼‰</strong> æ˜¯ç”¨æˆ·åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„ä¸€ä¸ª&quot;è§†è§‰å­—ç¬¦&quot;ï¼Œå®ƒå¯èƒ½ç”±å¤šä¸ªç ç‚¹ç»„æˆï¼š</p>
<table>
<thead>
<tr>
<th>å­—å½¢ç°‡</th>
<th>ç ç‚¹ç»„æˆ</th>
<th>ç ç‚¹æ•°</th>
<th>char æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ã©</td>
<td>U+0065 + U+0301ï¼ˆe + ç»„åˆé‡éŸ³ç¬¦ï¼‰</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</td>
<td>U+1F468 + U+200D + U+1F469 + U+200D + U+1F467 + U+200D + U+1F466</td>
<td>7</td>
<td>11</td>
</tr>
<tr>
<td>ğŸ‡¨ğŸ‡³</td>
<td>U+1F1E8 + U+1F1F3ï¼ˆåŒºåŸŸæŒ‡ç¤ºç¬¦ C + Nï¼‰</td>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>í•œ</td>
<td>U+1112 + U+1161 + U+11ABï¼ˆá„’ + á…¡ + á†« ç»„åˆï¼‰</td>
<td>3</td>
<td>3</td>
</tr>
</tbody>
</table>
<h3 id="zwj-é›¶å®½è¿æ¥ç¬¦">ZWJï¼ˆé›¶å®½è¿æ¥ç¬¦ï¼‰</h3>
<p><strong>ZWJï¼ˆZero Width Joinerï¼ŒU+200Dï¼‰</strong> æ˜¯ä¸€ä¸ªä¸å¯è§å­—ç¬¦ï¼Œç”¨äºå°†å¤šä¸ª emoji è¿æ¥æˆä¸€ä¸ªå¤åˆ emojiï¼š</p>
<figure class="highlight fix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs fix"><span class="hljs-attr">ğŸ‘¨ + ZWJ + ğŸ’» </span>=<span class="hljs-string"> ğŸ‘¨â€ğŸ’»ï¼ˆç”·æ€§æŠ€æœ¯å·¥ä½œè€…ï¼‰</span><br><span class="hljs-string">ğŸ‘© + ZWJ + ğŸ”¬ = ğŸ‘©â€ğŸ”¬ï¼ˆå¥³æ€§ç§‘å­¦å®¶ï¼‰</span><br><span class="hljs-string">ğŸ‘¨ + ZWJ + ğŸ‘© + ZWJ + ğŸ‘§ + ZWJ + ğŸ‘¦ = ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ï¼ˆå®¶åº­ï¼‰</span><br><span class="hljs-string">ğŸ³ + ZWJ + ğŸŒˆ = ğŸ³ï¸â€ğŸŒˆï¼ˆå½©è™¹æ——ï¼‰</span><br></code></pre></td></tr></table></figure>
<h3 id="ç»„åˆå­—ç¬¦ä¸é¢„ç»„åˆå­—ç¬¦">ç»„åˆå­—ç¬¦ä¸é¢„ç»„åˆå­—ç¬¦</h3>
<p>åŒä¸€ä¸ªè§†è§‰å­—ç¬¦å¯èƒ½æœ‰å¤šç§ Unicode è¡¨ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é¢„ç»„åˆå½¢å¼ï¼ˆNFCï¼‰</span><br><span class="hljs-type">String</span> <span class="hljs-variable">nfc</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;\u00E9&quot;</span>;  <span class="hljs-comment">// Ã©ï¼ˆå•ä¸ªç ç‚¹ U+00E9ï¼‰</span><br><br><span class="hljs-comment">// ç»„åˆå½¢å¼ï¼ˆNFDï¼‰</span><br><span class="hljs-type">String</span> <span class="hljs-variable">nfd</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;e\u0301&quot;</span>;  <span class="hljs-comment">// e + ç»„åˆé‡éŸ³ç¬¦ï¼ˆä¸¤ä¸ªç ç‚¹ï¼‰</span><br><br>System.out.println(nfc.equals(nfd));  <span class="hljs-comment">// falseï¼</span><br>System.out.println(nfc.length());     <span class="hljs-comment">// 1</span><br>System.out.println(nfd.length());     <span class="hljs-comment">// 2</span><br><br><span class="hljs-comment">// æ­£ç¡®æ¯”è¾ƒï¼šå…ˆæ­£è§„åŒ–</span><br><span class="hljs-type">String</span> <span class="hljs-variable">normalizedNfc</span> <span class="hljs-operator">=</span> Normalizer.normalize(nfc, Normalizer.Form.NFC);<br><span class="hljs-type">String</span> <span class="hljs-variable">normalizedNfd</span> <span class="hljs-operator">=</span> Normalizer.normalize(nfd, Normalizer.Form.NFC);<br>System.out.println(normalizedNfc.equals(normalizedNfd));  <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure>
<h3 id="unicode-æ­£è§„åŒ–å½¢å¼">Unicode æ­£è§„åŒ–å½¢å¼</h3>
<table>
<thead>
<tr>
<th>å½¢å¼</th>
<th>å…¨ç§°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NFC</strong></td>
<td>Canonical Decomposition + Canonical Composition</td>
<td>å…ˆåˆ†è§£å†ç»„åˆï¼ˆæ¨èï¼‰</td>
</tr>
<tr>
<td><strong>NFD</strong></td>
<td>Canonical Decomposition</td>
<td>å®Œå…¨åˆ†è§£</td>
</tr>
<tr>
<td><strong>NFKC</strong></td>
<td>Compatibility Decomposition + Canonical Composition</td>
<td>å…¼å®¹åˆ†è§£å†ç»„åˆ</td>
</tr>
<tr>
<td><strong>NFKD</strong></td>
<td>Compatibility Decomposition</td>
<td>å…¼å®¹åˆ†è§£</td>
</tr>
</tbody>
</table>
<p><strong>NFC</strong> æ˜¯æœ€å¸¸ç”¨çš„å½¢å¼ï¼ŒWeb æ ‡å‡†ï¼ˆHTML5ï¼‰æ¨èä½¿ç”¨ NFCã€‚</p>
<h3 id="java-ä¸­å¤„ç†å­—å½¢ç°‡">Java ä¸­å¤„ç†å­—å½¢ç°‡</h3>
<p>Java æ ‡å‡†åº“æ²¡æœ‰ç›´æ¥æä¾›å­—å½¢ç°‡ APIï¼Œä½†å¯ä»¥ä½¿ç”¨ <code>BreakIterator</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.text.BreakIterator;<br><br><span class="hljs-type">String</span> <span class="hljs-variable">family</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦&quot;</span>;<br><br><span class="hljs-comment">// char æ•°é‡</span><br>System.out.println(family.length());  <span class="hljs-comment">// 11</span><br><br><span class="hljs-comment">// ç ç‚¹æ•°é‡</span><br>System.out.println(family.codePointCount(<span class="hljs-number">0</span>, family.length()));  <span class="hljs-comment">// 7</span><br><br><span class="hljs-comment">// å­—å½¢ç°‡æ•°é‡</span><br><span class="hljs-type">BreakIterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> BreakIterator.getCharacterInstance();<br>iterator.setText(family);<br><span class="hljs-type">int</span> <span class="hljs-variable">graphemeCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (iterator.next() != BreakIterator.DONE) &#123;<br>    graphemeCount++;<br>&#125;<br>System.out.println(graphemeCount);  <span class="hljs-comment">// 1ï¼ˆç”¨æˆ·çœ‹åˆ°çš„å­—ç¬¦æ•°ï¼‰</span><br></code></pre></td></tr></table></figure>
<hr>
<h2 id="part-7-ç¼–ç è½¬æ¢ä¸ä¹±ç ">Part 7: ç¼–ç è½¬æ¢ä¸ä¹±ç </h2>
<h3 id="java-ä¸­çš„ç¼–ç è½¬æ¢">Java ä¸­çš„ç¼–ç è½¬æ¢</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ä½ å¥½ä¸–ç•Œ&quot;</span>;<br><br><span class="hljs-comment">// String â†’ byte[]ï¼ˆç¼–ç ï¼‰</span><br><span class="hljs-type">byte</span>[] utf8Bytes = text.getBytes(StandardCharsets.UTF_8);<br><span class="hljs-type">byte</span>[] gbkBytes = text.getBytes(Charset.forName(<span class="hljs-string">&quot;GBK&quot;</span>));<br><br>System.out.println(utf8Bytes.length);  <span class="hljs-comment">// 12ï¼ˆæ¯ä¸ªæ±‰å­— 3 å­—èŠ‚ï¼‰</span><br>System.out.println(gbkBytes.length);   <span class="hljs-comment">// 8ï¼ˆæ¯ä¸ªæ±‰å­— 2 å­—èŠ‚ï¼‰</span><br><br><span class="hljs-comment">// byte[] â†’ Stringï¼ˆè§£ç ï¼‰</span><br><span class="hljs-type">String</span> <span class="hljs-variable">fromUtf8</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(utf8Bytes, StandardCharsets.UTF_8);   <span class="hljs-comment">// æ­£ç¡®</span><br><span class="hljs-type">String</span> <span class="hljs-variable">garbled</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(utf8Bytes, Charset.forName(<span class="hljs-string">&quot;GBK&quot;</span>));    <span class="hljs-comment">// ä¹±ç ï¼</span><br></code></pre></td></tr></table></figure>
<h3 id="å¸¸è§ä¹±ç åœºæ™¯ä¸è§£å†³æ–¹æ¡ˆ">å¸¸è§ä¹±ç åœºæ™¯ä¸è§£å†³æ–¹æ¡ˆ</h3>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>åŸå› </th>
<th>è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç½‘é¡µä¹±ç </strong></td>
<td>Content-Type æœªæŒ‡å®šæˆ–æŒ‡å®šé”™è¯¯</td>
<td>è®¾ç½® <code>Content-Type: text/html; charset=UTF-8</code></td>
</tr>
<tr>
<td><strong>æ•°æ®åº“ä¹±ç </strong></td>
<td>æ•°æ®åº“/è¿æ¥/è¡¨çš„å­—ç¬¦é›†ä¸ä¸€è‡´</td>
<td>ç»Ÿä¸€ä½¿ç”¨ <code>utf8mb4</code>ï¼ˆMySQLï¼‰</td>
</tr>
<tr>
<td><strong>æ–‡ä»¶ä¹±ç </strong></td>
<td>æ–‡ä»¶ç¼–ç ä¸è¯»å–ç¼–ç ä¸åŒ¹é…</td>
<td>ä½¿ç”¨ BOM æˆ–æ˜¾å¼æŒ‡å®šç¼–ç </td>
</tr>
<tr>
<td><strong>æ§åˆ¶å°ä¹±ç </strong></td>
<td>æ§åˆ¶å°ç¼–ç ä¸ç¨‹åºè¾“å‡ºç¼–ç ä¸åŒ¹é…</td>
<td>è®¾ç½® <code>-Dfile.encoding=UTF-8</code></td>
</tr>
</tbody>
</table>
<h3 id="charsetencoder-ä¸-charsetdecoder-çš„é”™è¯¯å¤„ç†ç­–ç•¥">CharsetEncoder ä¸ CharsetDecoder çš„é”™è¯¯å¤„ç†ç­–ç•¥</h3>
<p>Java æä¾›äº† <code>CharsetEncoder</code> å’Œ <code>CharsetDecoder</code> ç”¨äºç²¾ç»†æ§åˆ¶ç¼–ç è½¬æ¢è¿‡ç¨‹ï¼Œæ”¯æŒå¤šç§é”™è¯¯å¤„ç†ç­–ç•¥ï¼š</p>
<p><strong>CharsetEncoder å¤„ç†ç­–ç•¥</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">CharsetEncoder</span> <span class="hljs-variable">encoder</span> <span class="hljs-operator">=</span> StandardCharsets.UTF_8.newEncoder();<br><br><span class="hljs-comment">// 1. REPLACEï¼ˆé»˜è®¤ï¼‰ï¼šæ›¿æ¢ä¸ºæ›¿æ¢å­—ç¬¦ï¼ˆé€šå¸¸æ˜¯ &#x27;?&#x27;ï¼‰</span><br>encoder.onMalformedInput(CodingErrorAction.REPLACE);<br>encoder.onUnmappableCharacter(CodingErrorAction.REPLACE);<br><br><span class="hljs-comment">// 2. REPORTï¼šæŠ›å‡º CharacterCodingException</span><br>encoder.onMalformedInput(CodingErrorAction.REPORT);<br>encoder.onUnmappableCharacter(CodingErrorAction.REPORT);<br><br><span class="hljs-comment">// 3. IGNOREï¼šå¿½ç•¥é”™è¯¯å­—ç¬¦</span><br>encoder.onMalformedInput(CodingErrorAction.IGNORE);<br>encoder.onUnmappableCharacter(CodingErrorAction.IGNORE);<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> encoder.encode(CharBuffer.wrap(<span class="hljs-string">&quot;æµ‹è¯•å­—ç¬¦ä¸²&quot;</span>));<br>&#125; <span class="hljs-keyword">catch</span> (CharacterCodingException e) &#123;<br>    <span class="hljs-comment">// å¤„ç†ç¼–ç å¼‚å¸¸</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>CharsetDecoder å¤„ç†ç­–ç•¥</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">CharsetDecoder</span> <span class="hljs-variable">decoder</span> <span class="hljs-operator">=</span> StandardCharsets.UTF_8.newDecoder();<br><br><span class="hljs-comment">// 1. REPLACEï¼šæ›¿æ¢ä¸ºæ›¿æ¢å­—ç¬¦ï¼ˆé»˜è®¤æ˜¯ &#x27;\uFFFD&#x27;ï¼‰</span><br>decoder.onMalformedInput(CodingErrorAction.REPLACE);<br>decoder.onUnmappableCharacter(CodingErrorAction.REPLACE);<br><br><span class="hljs-comment">// 2. REPORTï¼šæŠ›å‡º CharacterCodingException</span><br>decoder.onMalformedInput(CodingErrorAction.REPORT);<br>decoder.onUnmappableCharacter(CodingErrorAction.REPORT);<br><br><span class="hljs-comment">// 3. IGNOREï¼šå¿½ç•¥é”™è¯¯å­—èŠ‚</span><br>decoder.onMalformedInput(CodingErrorAction.IGNORE);<br>decoder.onUnmappableCharacter(CodingErrorAction.IGNORE);<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-type">CharBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> decoder.decode(ByteBuffer.wrap(bytes));<br>&#125; <span class="hljs-keyword">catch</span> (CharacterCodingException e) &#123;<br>    <span class="hljs-comment">// å¤„ç†è§£ç å¼‚å¸¸</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>é”™è¯¯ç±»å‹è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>malformed-input</strong>ï¼šè¾“å…¥å­—èŠ‚åºåˆ—ä¸ç¬¦åˆç¼–ç è§„èŒƒï¼ˆå¦‚ UTF-8 æ— æ•ˆå­—èŠ‚ï¼‰</li>
<li><strong>unmappable-character</strong>ï¼šå­—ç¬¦æ— æ³•æ˜ å°„åˆ°ç›®æ ‡ç¼–ç ï¼ˆå¦‚ GBK æ— æ³•è¡¨ç¤ºçš„ Unicode å­—ç¬¦ï¼‰</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ <code>REPLACE</code> ç­–ç•¥ï¼Œé¿å…å› ä¸ªåˆ«å­—ç¬¦å¯¼è‡´æ•´ä¸ªæµç¨‹å¤±è´¥</li>
<li>å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚é«˜çš„åœºæ™¯ä½¿ç”¨ <code>REPORT</code> ç­–ç•¥å¹¶æ˜¾å¼å¤„ç†å¼‚å¸¸</li>
<li>è‡ªå®šä¹‰æ›¿æ¢å­—ç¬¦ï¼š<code>encoder.replaceWith(new byte[]{(byte)'?'})</code></li>
</ul>
<h3 id="mysql-çš„-utf8-vs-utf8mb4">MySQL çš„ utf8 vs utf8mb4</h3>
<p>MySQL çš„ <code>utf8</code> ç¼–ç å®é™…ä¸Šä»…æ”¯æŒ 3 å­—èŠ‚ï¼ˆå³ BMP å­—ç¬¦ï¼‰ã€‚è¦å­˜å‚¨ emoji ç­‰å¢è¡¥å­—ç¬¦ï¼Œå¿…é¡»ä½¿ç”¨ <code>utf8mb4</code>ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- âŒ é”™è¯¯ï¼šutf8 æ— æ³•å­˜å‚¨ emoji</span><br><span class="hljs-keyword">CREATE TABLE</span> messages (<br>    content <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">CHARACTER SET</span> utf8<br>);<br><span class="hljs-keyword">INSERT INTO</span> messages <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;Hello ğŸ˜€&#x27;</span>);  <span class="hljs-comment">-- æŠ¥é”™æˆ–æˆªæ–­ï¼</span><br><br><span class="hljs-comment">-- âœ… æ­£ç¡®ï¼šä½¿ç”¨ utf8mb4</span><br><span class="hljs-keyword">CREATE TABLE</span> messages (<br>    content <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">CHARACTER SET</span> utf8mb4<br>);<br><span class="hljs-keyword">INSERT INTO</span> messages <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;Hello ğŸ˜€&#x27;</span>);  <span class="hljs-comment">-- æ­£å¸¸å­˜å‚¨</span><br></code></pre></td></tr></table></figure>
<h3 id="æ–‡ä»¶è¯»å†™çš„ç¼–ç å¤„ç†">æ–‡ä»¶è¯»å†™çš„ç¼–ç å¤„ç†</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// âœ… æ¨èï¼šæ˜¾å¼æŒ‡å®šç¼–ç </span><br><span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;data.txt&quot;</span>),<br>            StandardCharsets.UTF_8<br>        ))) &#123;<br>    String line;<br>    <span class="hljs-keyword">while</span> ((line = reader.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>        System.out.println(line);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// âœ… Java 11+ ç®€åŒ–å†™æ³•</span><br><span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> Files.readString(Path.of(<span class="hljs-string">&quot;data.txt&quot;</span>), StandardCharsets.UTF_8);<br><br><span class="hljs-comment">// âŒ å±é™©ï¼šä¾èµ–å¹³å°é»˜è®¤ç¼–ç </span><br><span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> Files.readString(Path.of(<span class="hljs-string">&quot;data.txt&quot;</span>));  <span class="hljs-comment">// ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¼–ç </span><br></code></pre></td></tr></table></figure>
<hr>
<h2 id="part-8-æ­£åˆ™è¡¨è¾¾å¼ä¸-unicode">Part 8: æ­£åˆ™è¡¨è¾¾å¼ä¸ Unicode</h2>
<h3 id="java-æ­£åˆ™çš„-unicode-æ”¯æŒ">Java æ­£åˆ™çš„ Unicode æ”¯æŒ</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åŒ¹é…ä»»æ„ Unicode å­—æ¯ï¼ˆä¸ä»…æ˜¯ ASCIIï¼‰</span><br><span class="hljs-type">Pattern</span> <span class="hljs-variable">unicodeLetter</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">&quot;\\p&#123;L&#125;+&quot;</span>);<br><span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> unicodeLetter.matcher(<span class="hljs-string">&quot;Hello ä½ å¥½ Ù…Ø±Ø­Ø¨Ø§&quot;</span>);<br><span class="hljs-keyword">while</span> (matcher.find()) &#123;<br>    System.out.println(matcher.group());<br>&#125;<br><span class="hljs-comment">// è¾“å‡ºï¼šHello, ä½ å¥½, Ù…Ø±Ø­Ø¨Ø§</span><br><br><span class="hljs-comment">// Unicode ç±»åˆ«</span><br><span class="hljs-comment">// \p&#123;L&#125;  - å­—æ¯ï¼ˆLetterï¼‰</span><br><span class="hljs-comment">// \p&#123;N&#125;  - æ•°å­—ï¼ˆNumberï¼‰</span><br><span class="hljs-comment">// \p&#123;P&#125;  - æ ‡ç‚¹ï¼ˆPunctuationï¼‰</span><br><span class="hljs-comment">// \p&#123;S&#125;  - ç¬¦å·ï¼ˆSymbolï¼‰</span><br><span class="hljs-comment">// \p&#123;Z&#125;  - åˆ†éš”ç¬¦ï¼ˆSeparatorï¼‰</span><br><span class="hljs-comment">// \p&#123;M&#125;  - æ ‡è®°ï¼ˆMarkï¼Œå¦‚ç»„åˆé‡éŸ³ç¬¦ï¼‰</span><br><span class="hljs-comment">// \p&#123;C&#125;  - æ§åˆ¶å­—ç¬¦ï¼ˆControlï¼‰</span><br><br><span class="hljs-comment">// åŒ¹é… emojiï¼ˆUnicode å±æ€§ï¼‰</span><br><span class="hljs-type">Pattern</span> <span class="hljs-variable">emojiPattern</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">&quot;[\\x&#123;1F600&#125;-\\x&#123;1F64F&#125;]&quot;</span>);<br></code></pre></td></tr></table></figure>
<h3 id="unicode-character-class-æ ‡å¿—">UNICODE_CHARACTER_CLASS æ ‡å¿—</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œ\w åªåŒ¹é… ASCII å­—æ¯æ•°å­—</span><br><span class="hljs-type">Pattern</span> <span class="hljs-variable">asciiWord</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">&quot;\\w+&quot;</span>);<br><span class="hljs-comment">// åŒ¹é… &quot;Hello&quot; ä½†ä¸åŒ¹é… &quot;ä½ å¥½&quot;</span><br><br><span class="hljs-comment">// å¯ç”¨ UNICODE_CHARACTER_CLASS åï¼Œ\w åŒ¹é…æ‰€æœ‰ Unicode å­—æ¯æ•°å­—</span><br><span class="hljs-type">Pattern</span> <span class="hljs-variable">unicodeWord</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">&quot;\\w+&quot;</span>, Pattern.UNICODE_CHARACTER_CLASS);<br><span class="hljs-comment">// åŒ¹é… &quot;Hello&quot; å’Œ &quot;ä½ å¥½&quot;</span><br></code></pre></td></tr></table></figure>
<h3 id="å¤§å°å†™ä¸æ•æ„ŸåŒ¹é…">å¤§å°å†™ä¸æ•æ„ŸåŒ¹é…</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ASCII å¤§å°å†™ä¸æ•æ„Ÿ</span><br>Pattern.compile(<span class="hljs-string">&quot;hello&quot;</span>, Pattern.CASE_INSENSITIVE);<br><span class="hljs-comment">// åŒ¹é… &quot;Hello&quot;, &quot;HELLO&quot; ä½†ä¸åŒ¹é… &quot;hÃ©llo&quot;</span><br><br><span class="hljs-comment">// Unicode å¤§å°å†™ä¸æ•æ„Ÿ</span><br>Pattern.compile(<span class="hljs-string">&quot;hello&quot;</span>, Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE);<br><span class="hljs-comment">// æ­£ç¡®å¤„ç†å„ç§è¯­è¨€çš„å¤§å°å†™è½¬æ¢</span><br></code></pre></td></tr></table></figure>
<hr>
<h2 id="part-9-å›½é™…åŒ–-i18n-å®è·µ">Part 9: å›½é™…åŒ–ï¼ˆi18nï¼‰å®è·µ</h2>
<h3 id="locale-ä¸å­—ç¬¦ä¸²æ¯”è¾ƒ">Locale ä¸å­—ç¬¦ä¸²æ¯”è¾ƒ</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åœŸè€³å…¶è¯­çš„ I/i é—®é¢˜</span><br><span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;TITLE&quot;</span>;<br><span class="hljs-type">Locale</span> <span class="hljs-variable">turkish</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Locale</span>(<span class="hljs-string">&quot;tr&quot;</span>, <span class="hljs-string">&quot;TR&quot;</span>);<br><br>System.out.println(text.toLowerCase());              <span class="hljs-comment">// &quot;title&quot;ï¼ˆè‹±è¯­ç¯å¢ƒï¼‰</span><br>System.out.println(text.toLowerCase(turkish));        <span class="hljs-comment">// &quot;tÄ±tle&quot;ï¼ˆåœŸè€³å…¶è¯­ï¼šI â†’ Ä±ï¼Œä¸æ˜¯ iï¼‰</span><br><br><span class="hljs-comment">// å¾·è¯­çš„ ÃŸ é—®é¢˜</span><br><span class="hljs-type">String</span> <span class="hljs-variable">german</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;straÃŸe&quot;</span>;<br>System.out.println(german.toUpperCase(Locale.GERMAN));  <span class="hljs-comment">// &quot;STRASSE&quot;ï¼ˆÃŸ â†’ SSï¼‰</span><br></code></pre></td></tr></table></figure>
<h3 id="collatorï¼šè¯­è¨€æ„ŸçŸ¥çš„æ’åº">Collatorï¼šè¯­è¨€æ„ŸçŸ¥çš„æ’åº</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// é»˜è®¤æ’åºï¼ˆåŸºäº Unicode ç ç‚¹ï¼‰</span><br>List&lt;String&gt; words = Arrays.asList(<span class="hljs-string">&quot;cafÃ©&quot;</span>, <span class="hljs-string">&quot;caff&quot;</span>, <span class="hljs-string">&quot;cache&quot;</span>);<br>Collections.sort(words);<br><span class="hljs-comment">// [cache, cafÃ©, caff]ï¼ˆÃ© çš„ç ç‚¹å¤§äº fï¼‰</span><br><br><span class="hljs-comment">// æ³•è¯­æ’åº</span><br><span class="hljs-type">Collator</span> <span class="hljs-variable">frenchCollator</span> <span class="hljs-operator">=</span> Collator.getInstance(Locale.FRENCH);<br>words.sort(frenchCollator);<br><span class="hljs-comment">// [cache, cafÃ©, caff]ï¼ˆæ³•è¯­ä¸­ Ã© æ’åœ¨ f ä¹‹å‰ï¼‰</span><br></code></pre></td></tr></table></figure>
<h3 id="å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶çš„æ­£ç¡®å®ç°">å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶çš„æ­£ç¡®å®ç°</h3>
<p>åœ¨æ•°æ®åº“æˆ– API ä¸­é™åˆ¶å­—ç¬¦ä¸²é•¿åº¦æ—¶ï¼Œéœ€è¦æ˜ç¡®&quot;é•¿åº¦&quot;çš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countGraphemeClusters</span><span class="hljs-params">(String text)</span> &#123;<br>    <span class="hljs-type">BreakIterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> BreakIterator.getCharacterInstance();<br>    iterator.setText(text);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (iterator.next() != BreakIterator.DONE) &#123;<br>        count++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> count;<br>&#125;<br><br><span class="hljs-comment">// ä¸åŒçš„&quot;é•¿åº¦&quot;</span><br><span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Hello ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦&quot;</span>;<br>System.out.println(text.length());                    <span class="hljs-comment">// 17ï¼ˆchar æ•°ï¼‰</span><br>System.out.println(text.codePointCount(<span class="hljs-number">0</span>, text.length()));  <span class="hljs-comment">// 13ï¼ˆç ç‚¹æ•°ï¼‰</span><br>System.out.println(countGraphemeClusters(text));      <span class="hljs-comment">// 7ï¼ˆå­—å½¢ç°‡æ•°ï¼‰</span><br>System.out.println(text.getBytes(StandardCharsets.UTF_8).length);  <span class="hljs-comment">// 31ï¼ˆUTF-8 å­—èŠ‚æ•°ï¼‰</span><br></code></pre></td></tr></table></figure>
<hr>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<table>
<thead>
<tr>
<th>å±‚æ¬¡</th>
<th>æ¦‚å¿µ</th>
<th>Java è¡¨ç¤º</th>
<th>å¤§å°</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å­—èŠ‚</strong></td>
<td>å­˜å‚¨å•å…ƒ</td>
<td><code>byte</code></td>
<td>8 ä½</td>
<td>æ–‡ä»¶/ç½‘ç»œ I/O</td>
</tr>
<tr>
<td><strong>ä»£ç å•å…ƒ</strong></td>
<td>ç¼–ç å•å…ƒ</td>
<td><code>char</code></td>
<td>16 ä½</td>
<td>Java å†…éƒ¨å­˜å‚¨</td>
</tr>
<tr>
<td><strong>ç ç‚¹</strong></td>
<td>Unicode ç¼–å·</td>
<td><code>int</code></td>
<td>21 ä½</td>
<td>å­—ç¬¦æ ‡è¯†</td>
</tr>
<tr>
<td><strong>å­—å½¢ç°‡</strong></td>
<td>è§†è§‰å­—ç¬¦</td>
<td><code>BreakIterator</code></td>
<td>å¯å˜</td>
<td>ç”¨æˆ·ç•Œé¢</td>
</tr>
</tbody>
</table>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š</p>
<ol>
<li><strong>ä¸è¦å‡è®¾ä¸€ä¸ª <code>char</code> å°±æ˜¯ä¸€ä¸ªå­—ç¬¦</strong></li>
<li><strong>éå†å­—ç¬¦ä¸²æ—¶ä½¿ç”¨ <code>codePoints()</code> è€Œé <code>charAt()</code></strong></li>
<li><strong>æ¯”è¾ƒå­—ç¬¦ä¸²å‰å…ˆè¿›è¡Œ Unicode æ­£è§„åŒ–</strong></li>
<li><strong>å­˜å‚¨å’Œä¼ è¾“ç»Ÿä¸€ä½¿ç”¨ UTF-8</strong></li>
<li><strong>æ•°æ®åº“ä½¿ç”¨ <code>utf8mb4</code> è€Œé <code>utf8</code></strong></li>
</ol>
<h3 id="java-17-çš„-unicode-ç‰ˆæœ¬æ”¯æŒæƒ…å†µ">Java 17+ çš„ Unicode ç‰ˆæœ¬æ”¯æŒæƒ…å†µ</h3>
<p>Java å¹³å°éšç€ç‰ˆæœ¬æ›´æ–°æŒç»­å‡çº§ Unicode æ ‡å‡†æ”¯æŒï¼š</p>
<table>
<thead>
<tr>
<th>Java ç‰ˆæœ¬</th>
<th>Unicode ç‰ˆæœ¬</th>
<th>ä¸»è¦æ›´æ–°</th>
</tr>
</thead>
<tbody>
<tr>
<td>Java 8</td>
<td>Unicode 6.2.0</td>
<td>åŸºç¡€ Unicode æ”¯æŒ</td>
</tr>
<tr>
<td>Java 9</td>
<td>Unicode 8.0.0</td>
<td>æ–°å¢ 7,500+ å­—ç¬¦ï¼ŒåŒ…æ‹¬ emoji 5.0</td>
</tr>
<tr>
<td>Java 11</td>
<td>Unicode 10.0.0</td>
<td>æ–°å¢ 8,518 å­—ç¬¦ï¼ŒåŒ…æ‹¬ emoji 11.0</td>
</tr>
<tr>
<td>Java 12</td>
<td>Unicode 11.0.0</td>
<td>æ–°å¢ 684 å­—ç¬¦ï¼ŒåŒ…æ‹¬ emoji 11.0</td>
</tr>
<tr>
<td>Java 13</td>
<td>Unicode 12.1.0</td>
<td>æ–°å¢ 554 å­—ç¬¦ï¼ŒåŒ…æ‹¬ emoji 12.0</td>
</tr>
<tr>
<td>Java 15</td>
<td>Unicode 13.0.0</td>
<td>æ–°å¢ 5,930 å­—ç¬¦ï¼ŒåŒ…æ‹¬ emoji 13.0</td>
</tr>
<tr>
<td>Java 17</td>
<td>Unicode 13.0.0</td>
<td>é•¿æœŸæ”¯æŒç‰ˆæœ¬</td>
</tr>
<tr>
<td>Java 21</td>
<td>Unicode 15.0.0</td>
<td>æ–°å¢ 4,489 å­—ç¬¦ï¼ŒåŒ…æ‹¬ emoji 15.0</td>
</tr>
</tbody>
</table>
<p><strong>é‡è¦å½±å“</strong>ï¼š</p>
<ul>
<li><strong>æ–°å­—ç¬¦æ”¯æŒ</strong>ï¼šæ–°ç‰ˆæœ¬æ”¯æŒæ›´å¤šè¯­è¨€å­—ç¬¦ã€ç¬¦å·å’Œ emoji</li>
<li><strong>è§„èŒƒåŒ–å˜åŒ–</strong>ï¼šæ–°ç‰ˆæœ¬å¯èƒ½å¼•å…¥æ–°çš„è§„èŒƒåŒ–è§„åˆ™</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šæ–°ç‰ˆæœ¬é€šå¸¸åŒ…å«å­—ç¬¦å¤„ç†æ€§èƒ½æ”¹è¿›</li>
</ul>
<p><strong>ç‰ˆæœ¬å…¼å®¹æ€§å»ºè®®</strong>ï¼š</p>
<ul>
<li>éœ€è¦æœ€æ–° emoji æ”¯æŒçš„åº”ç”¨å»ºè®®ä½¿ç”¨ Java 21+</li>
<li>ä¼ä¸šçº§åº”ç”¨å¯ä½¿ç”¨ Java 17 LTS ç‰ˆæœ¬ï¼ˆUnicode 13.0ï¼‰</li>
<li>å¦‚éœ€å¤„ç†ç‰¹å®š Unicode ç‰ˆæœ¬å†…å®¹ï¼Œåº”éªŒè¯ç›®æ ‡ Java ç‰ˆæœ¬çš„æ”¯æŒæƒ…å†µ</li>
</ul>
<p><strong>æ£€æŸ¥å½“å‰ Unicode ç‰ˆæœ¬</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Character.<span class="hljs-type">UnicodeBlock</span> <span class="hljs-variable">block</span> <span class="hljs-operator">=</span> Character.UnicodeBlock.of(<span class="hljs-string">&#x27;ä½ &#x27;</span>);<br>System.out.println(<span class="hljs-string">&quot;Unicode ç‰ˆæœ¬ä¿¡æ¯å¯é€šè¿‡ Character ç±»è·å–&quot;</span>);<br></code></pre></td></tr></table></figure>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.unicode.org/standard/standard.html">The Unicode Standard</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html">Java Character ç±»æ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://openjdk.org/jeps/254">JEP 254: Compact Strings</a></li>
<li><a target="_blank" rel="noopener" href="https://unicode.org/reports/tr15/">Unicode æ­£è§„åŒ–å½¢å¼</a></li>
<li><a target="_blank" rel="noopener" href="https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/">Joel on Software: The Absolute Minimum Every Software Developer Must Know About Unicode</a></li>
</ul>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://magicliang.github.io">magicliang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://magicliang.github.io/2025/07/29/Java-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E4%B8%8E-Unicode-%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/">https://magicliang.github.io/2025/07/29/Java-%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E4%B8%8E-Unicode-%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/Unicode/">Unicode</a><a class="post-meta__tags" href="/tags/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/">å­—ç¬¦ç¼–ç </a></div><div class="post-share"><div class="social-share" data-image="/img/wall-paper-95.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2017/10/23/%E6%98%82%E8%B4%B5%E7%9A%84%E5%BC%82%E5%B8%B8/" title="æ˜‚è´µçš„å¼‚å¸¸"><img class="cover" src="/img/wall-paper-137.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2017-10-23</div><div class="info-item-2">æ˜‚è´µçš„å¼‚å¸¸</div></div><div class="info-2"><div class="info-item-1">æŠ›å‡ºé—®é¢˜ Joshua Bloch åœ¨ã€ŠEffective Javaã€‹çš„ Item 57 é‡Œæ˜ç¡®åœ°æåˆ°è¿‡ï¼Œä¸è¦è¯•å›¾ç”¨ Exception çš„è·³è½¬æ¥ä»£æ›¿æ­£å¸¸çš„ç¨‹åºæ§åˆ¶æµã€‚ä»–åˆ—ä¸¾äº†å¾ˆå¤šåŸå› ï¼Œä½†ç‰¹åˆ«æåˆ°äº†æŠ›å‡ºå¼‚å¸¸ä¼šä½¿å¾—æ•´ä¸ªç¨‹åºè¿è¡Œå˜æ…¢ã€‚æŠ›å‡ºå¼‚å¸¸è¿œæ¯”æ™®é€šçš„ returnã€break ç­‰æ“ä½œå¯¹æ§åˆ¶æµã€æ•°æ®æµçš„æ€§èƒ½å½±å“è¦å¤§ï¼Œå®ƒå°±åªé€‚åˆæ‹¿æ¥ä½œå¼‚å¸¸åˆ†æ”¯çš„æ§åˆ¶è¯­å¥ï¼Œè€Œä¸èƒ½æ‹¿æ¥ç¼–å†™æ­£å¸¸çš„é€»è¾‘ã€‚  Throwing exception is expensive.  è¿™å¥è¯åœ¨ Java çš„ç¨‹åºå‘˜ä¸–ç•Œé‡Œé¢å·²ç»æˆä¸ºè€ç”Ÿå¸¸è°ˆï¼Œå´å¾ˆå°‘æœ‰äººè°ˆåŠåˆ°åº•æŠ›å‡ºå¼‚å¸¸æ¯”æ­£å¸¸çš„ç¨‹åºè·³è½¬è¿”å›æ…¢åœ¨å“ªé‡Œï¼Œæœ‰å¤šæ…¢ã€‚&quot;ä¸è¦æ»¥ç”¨å¼‚å¸¸&quot;å¥½åƒä¸€ä¸ªçŒ´å­å®šå¾‹ï¼Œäººä»¬çŸ¥é“ä¸èƒ½è¿™ä¹ˆåšï¼Œå´ä¸æ˜ç™½ä¸ºä»€ä¹ˆä¸èƒ½è¿™ä¹ˆåšã€‚ æ­¤å‰è¯»äº†ä¸€ä½åŒäº‹å†™çš„å¥½æ–‡ã€ŠJavaè™šæ‹Ÿæœºæ˜¯å¦‚ä½•å¤„ç†å¼‚å¸¸çš„ã€‹ï¼Œæ·±å…¥åœ°åˆ†æäº† JVM å¯¹å¼‚å¸¸è·³è½¬çš„å¤„ç†è¿‡ç¨‹ï¼šJVM ä¼šé€šè¿‡å¼‚å¸¸è¡¨çš„æœºåˆ¶ï¼Œä¼˜åŒ–å¼‚å¸¸æŠ›å‡ºå’Œæ­£å¸¸è¿”å›ä¹‹é—´çš„æ€§èƒ½å·®å¼‚ã€‚ä»…ä»ç¨‹åºè®¡æ•°å™¨çš„ç§»åŠ¨ä¸Šæ¥è®²ï¼ŒæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹æ ˆå¸§çš„å¼¹æ ˆå¹¶ä¸æ¯”ç›´æ¥è¿”å›æ›´æ˜‚è´µã€‚å†™åœ¨å‰å¤´çš„ç»“è®ºæ˜¯ï¼š&quot;try-catch è¯­å¥å—å‡ ä¹ä¸ä¼šå½±å“ç¨‹åºè¿è¡Œæ€§èƒ½ï¼...</div></div></div></a><a class="pagination-related" href="/2017/11/30/Java%E4%B8%AD%E7%9A%84%E5%B9%BD%E7%81%B5%E7%B1%BB%E5%9E%8B/" title="Javaä¸­çš„å¹½çµç±»å‹"><img class="cover" src="/img/wall-paper-148.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2017-11-30</div><div class="info-item-2">Javaä¸­çš„å¹½çµç±»å‹</div></div><div class="info-2"><div class="info-item-1">ä»€ä¹ˆæ˜¯å¹½çµç±»å‹ å…ˆä¸Šç»“è®ºï¼šå¹½çµç±»å‹ï¼ˆPhantom Typeï¼‰é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¹½çµèˆ¬çš„ç±»å‹ï¼Œè¿™ç§ç±»å‹å¾€å¾€åœ¨è¿è¡Œæ—¶å¯ä»¥æ¶ˆå¤±ï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼Œå®ƒä»¬æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æ²¡æœ‰ä»»ä½•å®ä¾‹ï¼ˆJava çš„ Void å°±æ˜¯ä¸€ä¸ªä¸å¯å®ä¾‹åŒ–ç±»å‹çš„ä¾‹å­ï¼Œå¸¸è¢«ç”¨ä½œå¹½çµç±»å‹çš„ç±»å‹å‚æ•°ï¼Œå¦‚ Future&lt;Void&gt;ï¼‰ã€‚å¹½çµç±»å‹æ˜¯ä¸€ç§å¯ä»¥æŠŠæœ‰äº›è¿è¡Œæ—¶æ‰èƒ½æ£€æµ‹åˆ°çš„é”™è¯¯ï¼Œåœ¨ç¼–è¯‘æ—¶æ£€æµ‹å‡ºæ¥çš„æŠ€å·§ã€‚æŒ‰ç…§æœ‰äº›è€å¤–çš„è§‚ç‚¹ï¼Œå°±æ˜¯&quot;Making Wrong Code Look Wrong&quot;ã€‚åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸­ï¼Œå¹½çµç±»å‹çš„å®ç°ï¼Œå¾€å¾€ä¸çŠ¶æ€æ¨¡å¼è¾ƒä¸ºæ¥è¿‘ï¼Œä½†æ¯”çŠ¶æ€æ¨¡å¼æä¾›äº†æ›´å¼ºçš„çº é”™åŠŸèƒ½ã€‚åœ¨ Java 5 ä»¥åçš„ç‰ˆæœ¬é‡Œï¼Œç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨æ³›å‹ã€‚é€šè¿‡æ³›å‹çš„ç±»å‹å‚æ•°ï¼ŒJava ä¸­ä¹Ÿæ‹¥æœ‰äº†å¹½çµç±»å‹çš„èƒ½åŠ›ã€‚ ä¸Šé¢çš„é˜è¿°æ˜¯ä¸æ˜¯å¾ˆéš¾çœ‹æ‡‚ï¼Ÿç›´æ¥è¿›å…¥å…·ä½“çš„ä¾‹å­ã€‚å‡è®¾æœ‰ä¸€ä¸ªé£æœºæ§åˆ¶ç¨‹åºï¼Œæ“ä½œé£æœºèµ·é£æˆ–è€…è½åœ°ã€‚è¿™ä¸ªç¨‹åºæœ‰ä¸€ä¸ªéå¸¸å¼ºçš„ä¸šåŠ¡çº¦æŸï¼Œå°±æ˜¯å¿…é¡»ä¿è¯é£æœºä¸€å¼€å§‹å¿…é¡»å‡ºç°åœ¨åœ°ä¸Šï¼Œåªæœ‰åœ¨åœ°ä¸Šçš„é£æœºå¯ä»¥èµ·é£ï¼Œåªæœ‰èµ·é£çš„é£æœºå¯ä»¥è½åœ°ï¼Œé‚£ä¹ˆåº”è¯¥æ€æ ·è®¾è®¡ç¨‹åºï¼ˆä¸»è¦æ˜¯ç±»å‹å…³ç³»ï¼‰ï¼Œæ¥ä¿è¯è¿™ä¸ªçº¦æŸå¿…ç„¶æˆç«‹å‘¢ï¼Ÿ å®šä¹‰çŠ¶æ€æ¥å£ å…ˆæ¥å®šä¹‰...</div></div></div></a><a class="pagination-related" href="/2018/05/29/JPA-%E7%9A%84-id-%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5/" title="JPA çš„ id ç”Ÿæˆç­–ç•¥"><img class="cover" src="/img/wall-paper-149.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-05-29</div><div class="info-item-2">JPA çš„ id ç”Ÿæˆç­–ç•¥</div></div><div class="info-2"><div class="info-item-1">JPA æœ‰ä¸€ä¸ª@GeneratedValueæ³¨è§£ï¼Œæœ‰ä¸€ä¸ªstrategy attributeï¼Œå¦‚ @GeneratedValue(strategy = GenerationType.IDENTITY)ã€‚ å¸¸è§çš„å¯é€‰ç­–ç•¥ä¸»è¦æœ‰IDENTITYå’ŒSEQUENCEã€‚ GenerationType.IDENTITY è¦æ±‚åº•å±‚æœ‰ä¸€ä¸ª integer æˆ–è€… bigint ç±»å‹çš„è‡ªå¢åˆ—ï¼ˆ auto-incremented column)ã€‚è‡ªå¢åˆ—çš„èµ‹å€¼å¿…é¡»åœ¨æ’å…¥æ“ä½œä¹‹åå‘ç”Ÿï¼Œå› ä¸ºè¿™ä¸ªåŸå› ï¼ŒHibernate æ— æ³•è¿›è¡Œå„ç§ä¼˜åŒ–ï¼ˆç‰¹åˆ«æ˜¯ JDBC çš„ batch å¤„ç†ï¼Œä¸€æ¬¡ flush æ“ä½œä¼šäº§ç”Ÿå¾ˆå¤šæ¡insert è¯­å¥ï¼Œåˆ†åˆ«æ‰§è¡Œï¼‰ã€‚å¦‚æœäº‹åŠ¡å›æ»šï¼Œè‡ªå¢åˆ—çš„å€¼å°±ä¼šè¢«ä¸¢å¼ƒã€‚æ•°æ®åº“åœ¨è¿™ä¸ªè‡ªå¢æ“ä½œä¸Šæœ‰ä¸ªé«˜åº¦ä¼˜åŒ–çš„è½»é‡çº§é”æœºåˆ¶ï¼Œæ€§èƒ½éå¸¸æ£’ã€‚ MySQL æ”¯æŒè¿™ç§ id ç”Ÿæˆç­–ç•¥ï¼Œ ä½¿ç”¨ MySQL åº”è¯¥å°½é‡ä½¿ç”¨è¿™ä¸ªç­–ç•¥ï¼Œå³ä½¿å®ƒæ— æ³•ä¼˜åŒ–ã€‚ JPA ç”¨å®ƒç”Ÿæˆ idï¼Œä¼šä¸€æ¡ä¸€æ¡åœ°æ’å…¥æ–°çš„ entityã€‚ GenerationType.SEQUENCE æ•°æ®åº“æœ‰ä¸€ä¸ªæ‰€è°“çš„ sequence å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ selec...</div></div></div></a><a class="pagination-related" href="/2018/06/19/%E5%A6%82%E4%BD%95%E5%81%9A%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E7%9A%84%E9%97%AE%E9%A2%98%E4%B8%8B%E7%9A%84%E7%AD%94%E6%A1%88/" title="å¦‚ä½•åšæ€§èƒ½æµ‹è¯•çš„é—®é¢˜ä¸‹çš„ç­”æ¡ˆ"><img class="cover" src="/img/wall-paper-71.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-06-19</div><div class="info-item-2">å¦‚ä½•åšæ€§èƒ½æµ‹è¯•çš„é—®é¢˜ä¸‹çš„ç­”æ¡ˆ</div></div><div class="info-2"><div class="info-item-1">è¯•ç€å›ç­”ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚ é¦–å…ˆè¦åˆ’åˆ†ç³»ç»Ÿç±»å‹ï¼šæœ‰çŠ¶æ€è¿˜æ˜¯æ— çŠ¶æ€ï¼Œä¸šåŠ¡ç³»ç»Ÿè¿˜æ˜¯å­˜å‚¨ç³»ç»Ÿã€‚æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œè®¾ç«‹æ€§èƒ½æµ‹è¯•çš„ç›®æ ‡ï¼šæ˜¯è¦æµ‹ QPSï¼Œè¿˜æ˜¯ TPS è¿˜æ˜¯ TPSï¼Œè¿˜æ˜¯ä»»ä½•å…¶ä»–ã€æ€§èƒ½ã€‘-ä»å¹¿ä¹‰æ¥è®²ï¼Œä¸€ä¸ªå­˜å‚¨ç³»ç»Ÿåˆ°åº•èƒ½å¤Ÿä»¥å¤šé«˜çš„å¹³å‡æ—¶å»¶æ¥ç®¡ç†å¤§å¤šçš„å­˜å‚¨ç©ºé—´ï¼Œå¯èƒ½ä¹Ÿæ˜¯æ€§èƒ½çš„ä¸€ç§ã€‚ æœ‰äº†æ€§èƒ½æµ‹è¯•çš„ç›®æ ‡ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ‹†è§£ç”¨ä¾‹ã€‚å¦‚æœæŠŠæ€§èƒ½æµ‹è¯•å½’ä¸ºæµ‹è¯•çš„è¯ï¼Œæµ‹è¯•å°±éœ€è¦æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•ç”¨ä¾‹åªæ˜¯ç”¨ä¾‹çš„å½¢å¼åŒ–è¡¨è¾¾ã€‚æŠŠç”¨æˆ·çš„ä½¿ç”¨åœºæ™¯å‹¾å‹’å‡ºæ¥ï¼ŒæŠŠæ¯ä¸€æ­¥æ‹†è§£æˆçš„æµç¨‹å›¾æˆ–è€…æ—¶åºå›¾â€“æˆ‘ä»¬å·²ç»å¾—åˆ°äº†ä¸€ä¸ªçº¸ä¸Šçš„é›†æˆæµ‹è¯•è®¡åˆ’ï¼Œåªæ˜¯æ²¡æœ‰è·Ÿæ€§èƒ½æŒ‚ä¸Šé’©ã€‚ æ¥ä¸‹æ¥å°±è¿›å…¥çœŸæ­£å†™æµ‹è¯•ç”¨ä¾‹çš„ç¯èŠ‚äº†ã€‚ æˆ‘ä»¬çš„æµ‹è¯•æŠ¥å‘Šå¦‚æœè¦æ¶µç›–è¶³å¤Ÿç«‹ä½“çš„ä¿¡æ¯ï¼Œåˆ™æ—¢è¦äº†è§£æ¯ä¸€ä¸ªç¯èŠ‚/æ¥å£/API çš„æ€§èƒ½æŒ‡æ ‡ï¼Œåˆè¦äº†è§£æ•´ä½“çš„æ€§èƒ½æŒ‡æ ‡ã€‚ è¿™ä¸ªæ—¶å€™æµ‹è¯•å·¥å…·çš„è¦†ç›–é¢å°±å¾ˆé‡è¦äº†ã€‚å¦‚æœæˆ‘ä»¬é€‰æ‹©åé»‘ç›’çš„æµ‹è¯•å·¥å…·ï¼Œapache ab /JMeterï¼Œåˆ™æˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹å°±è¦å›´ç»•ç€å¯¹å¤–äº¤äº’çš„ APIå†™ï¼Œä¹Ÿåªèƒ½æµ‹åˆ°å¤–å›´æ¥å£çš„æ€§èƒ½ã€‚è¿™æ ·çš„æµ‹è¯•ç”¨ä¾‹å†™èµ·æ¥æœ€ç®€å•ï¼Œæ— éœ€ä¾µå…¥ä»»ä½•å†…éƒ¨ä»£ç ä¸­ã€‚ å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº† JMH ä¸€ç±»çš„å·¥å…·ï¼Œåˆ™å¯ä»¥è‡ªç”±ç¼–å†™å¯¹ä»»ä½•æ–¹æ³•çš„æµ‹è¯•ç”¨ä¾‹ã€‚ä½†éœ€è¦å¯¹ç³»ç»Ÿæœ‰éå¸¸...</div></div></div></a><a class="pagination-related" href="/2018/09/07/%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4/" title="æ—¥æœŸä¸æ—¶é—´"><img class="cover" src="/img/wall-paper-128.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-09-07</div><div class="info-item-2">æ—¥æœŸä¸æ—¶é—´</div></div><div class="info-2"><div class="info-item-1">JSR 310 Java Dateä¸Time API æ–°æ—§ API çš„æ›´è¿­ æ—§çš„ Java API ä¸»è¦åŒ…æ‹¬java.util.Dateå’Œjava.util.Calendar ä¸¤ä¸ªåŒ…çš„å†…å®¹ã€‚è¿™ä¸¤ä¸ªåŒ…çš„æ—¶é—´ç±»å‹æ˜¯å¯å˜çš„ã€‚å¦‚ Date çš„å®ä¾‹å¯ä»¥é€šè¿‡ setYear æ¥äº§ç”Ÿå˜åŒ–ã€‚ JSR 310 ä¸­åŒ…æ‹¬çš„æ—¥æœŸç±»å‹ä¸»è¦æœ‰ï¼š  è®¡ç®—æœºæ—¶é—´ï¼šInstantï¼Œå¯¹åº” java.util.Dateï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªç¡®å®šçš„æ—¶é—´ç‚¹ï¼Œå³ç›¸å¯¹äºæ ‡å‡†Javaçºªå…ƒï¼ˆ1970å¹´1æœˆ1æ—¥ï¼‰çš„åç§»é‡ï¼›ä½†ä¸java.util.Dateç±»ä¸åŒçš„æ˜¯å…¶ç²¾ç¡®åˆ°äº†çº³ç§’çº§åˆ«ã€‚ äººç±»æ—¶é—´ï¼šå¯¹åº”äºäººç±»è‡ªèº«çš„è§‚å¿µï¼Œæ¯”å¦‚LocalDateå’ŒLocalTimeã€‚ä»–ä»¬ä»£è¡¨äº†ä¸€èˆ¬çš„æ—¶åŒºæ¦‚å¿µï¼Œè¦ä¹ˆæ˜¯æ—¥æœŸï¼ˆä¸åŒ…å«æ—¶é—´ï¼‰ï¼Œè¦ä¹ˆæ˜¯æ—¶é—´ï¼ˆä¸åŒ…å«æ—¥æœŸï¼‰ï¼Œç±»ä¼¼äºjava.sqlçš„è¡¨ç¤ºæ–¹å¼ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªMonthDayï¼Œå®ƒå¯ä»¥å­˜å‚¨æŸäººçš„ç”Ÿæ—¥ï¼ˆä¸åŒ…å«å¹´ä»½ï¼‰ã€‚æ¯ä¸ªç±»éƒ½åœ¨å†…éƒ¨å­˜å‚¨æ­£ç¡®çš„æ•°æ®è€Œä¸æ˜¯åƒjava.util.Dateé‚£æ ·åˆ©ç”¨åˆå¤œ12ç‚¹æ¥åŒºåˆ†æ—¥æœŸï¼Œåˆ©ç”¨1970-01-01æ¥è¡¨ç¤ºæ—¶é—´ã€‚è¿™äº›ç±»å‹çš„å®ä¾‹æ˜¯ immutable çš„ï¼Œè€Œä¸”åªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•åˆ›å»ºã€‚  æ—¶åŒº...</div></div></div></a><a class="pagination-related" href="/2018/10/22/JDWP-%E4%B8%8E%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95/" title="JDWP ä¸è¿œç¨‹è°ƒè¯•"><img class="cover" src="/img/wall-paper-76.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2018-10-22</div><div class="info-item-2">JDWP ä¸è¿œç¨‹è°ƒè¯•</div></div><div class="info-2"><div class="info-item-1">JDWPï¼ˆJava Debug Wire Protocolï¼‰ï¼Œå®ƒæä¾›äº†è°ƒè¯•å™¨å’Œç›®æ ‡ JVM ï¼ˆtarget vmï¼‰ä¹‹é—´çš„è°ƒè¯•åè®®ã€‚ åœ¨ target vm å¯åŠ¨æ—¶ï¼Œå¢åŠ è¿™ä¸ª JAVA_OPTSï¼š 1JAVA_OPTS=&quot;-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=26310&quot; åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¢åŠ  remote debuging çš„æ—¶å€™ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼š 12345678# Java 9 ä»¥ä¸Š-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8000# Java 5-8-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000# Java 1.4.x -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,addre...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#part-1-unicode-%E5%9F%BA%E7%A1%80-%E5%AD%97%E7%AC%A6%E9%9B%86%E7%9A%84%E5%A4%A7%E4%B8%80%E7%BB%9F"><span class="toc-number">1.</span> <span class="toc-text">Part 1: Unicode åŸºç¡€â€”â€”å­—ç¬¦é›†çš„å¤§ä¸€ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E-ascii-%E5%88%B0-unicode-%E7%9A%84%E6%BC%94%E8%BF%9B"><span class="toc-number">1.1.</span> <span class="toc-text">ä» ASCII åˆ° Unicode çš„æ¼”è¿›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A0%81%E7%82%B9-code-point"><span class="toc-number">1.2.</span> <span class="toc-text">ç ç‚¹ï¼ˆCode Pointï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unicode-%E5%B9%B3%E9%9D%A2"><span class="toc-number">1.3.</span> <span class="toc-text">Unicode å¹³é¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%B9%B3%E9%9D%A2-code-plane"><span class="toc-number">1.4.</span> <span class="toc-text">ä»£ç å¹³é¢ï¼ˆCode Planeï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#part-2-utf-16-%E4%B8%8E-java-%E7%9A%84-char"><span class="toc-number">2.</span> <span class="toc-text">Part 2: UTF-16 ä¸ Java çš„ char</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88-java-%E9%80%89%E6%8B%A9%E4%BA%86-utf-16"><span class="toc-number">2.1.</span> <span class="toc-text">ä¸ºä»€ä¹ˆ Java é€‰æ‹©äº† UTF-16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E5%AF%B9-surrogate-pair"><span class="toc-number">2.2.</span> <span class="toc-text">ä»£ç†å¯¹ï¼ˆSurrogate Pairï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8D%95%E5%85%83-vs-%E7%A0%81%E7%82%B9-vs-%E5%AD%97%E5%BD%A2%E7%B0%87"><span class="toc-number">2.3.</span> <span class="toc-text">ä»£ç å•å…ƒ vs ç ç‚¹ vs å­—å½¢ç°‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-%E4%B8%AD%E7%9A%84%E9%99%B7%E9%98%B1"><span class="toc-number">2.4.</span> <span class="toc-text">Java ä¸­çš„é™·é˜±</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#part-3-utf-8-utf-16-utf-32-%E5%AF%B9%E6%AF%94"><span class="toc-number">3.</span> <span class="toc-text">Part 3: UTF-8ã€UTF-16ã€UTF-32 å¯¹æ¯”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#utf-8-%E7%BC%96%E7%A0%81%E8%A7%84%E5%88%99"><span class="toc-number">3.1.</span> <span class="toc-text">UTF-8 ç¼–ç è§„åˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D-utf-%E7%BC%96%E7%A0%81%E5%AF%B9%E6%AF%94"><span class="toc-number">3.2.</span> <span class="toc-text">ä¸‰ç§ UTF ç¼–ç å¯¹æ¯”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bom-byte-order-mark"><span class="toc-number">3.3.</span> <span class="toc-text">BOMï¼ˆByte Order Markï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#part-4-java-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.</span> <span class="toc-text">Part 4: Java å­—ç¬¦ä¸²çš„å†…éƒ¨å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#java-9-%E4%B9%8B%E5%89%8D%EF%BC%9Achar-%E5%AD%98%E5%82%A8"><span class="toc-number">4.1.</span> <span class="toc-text">Java 9 ä¹‹å‰ï¼šchar[] å­˜å‚¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-9-%EF%BC%9Acompact-strings"><span class="toc-number">4.2.</span> <span class="toc-text">Java 9+ï¼šCompact Strings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7"><span class="toc-number">4.3.</span> <span class="toc-text">å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B1%A0-string-pool"><span class="toc-number">4.4.</span> <span class="toc-text">å­—ç¬¦ä¸²æ± ï¼ˆString Poolï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string-intern-%E7%9A%84%E6%80%A7%E8%83%BD%E9%99%B7%E9%98%B1%E4%B8%8E%E8%B0%83%E4%BC%98"><span class="toc-number">4.5.</span> <span class="toc-text">String.intern() çš„æ€§èƒ½é™·é˜±ä¸è°ƒä¼˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#part-5-%E6%AD%A3%E7%A1%AE%E5%A4%84%E7%90%86-unicode-%E7%9A%84-java-api"><span class="toc-number">5.</span> <span class="toc-text">Part 5: æ­£ç¡®å¤„ç† Unicode çš„ Java API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A0%81%E7%82%B9%E7%BA%A7%E5%88%AB%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.</span> <span class="toc-text">ç ç‚¹çº§åˆ«çš„æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A0%81%E7%82%B9%E4%B8%8E-char-%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-number">5.2.</span> <span class="toc-text">ç ç‚¹ä¸ char çš„è½¬æ¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%8D%E8%BD%AC%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.3.</span> <span class="toc-text">å­—ç¬¦ä¸²åè½¬çš„æ­£ç¡®å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.4.</span> <span class="toc-text">å­—ç¬¦ä¸²æˆªå–çš„æ­£ç¡®å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#part-6-%E5%AD%97%E5%BD%A2%E7%B0%87-%E7%94%A8%E6%88%B7%E7%9C%BC%E4%B8%AD%E7%9A%84-%E5%AD%97%E7%AC%A6"><span class="toc-number">6.</span> <span class="toc-text">Part 6: å­—å½¢ç°‡â€”â€”ç”¨æˆ·çœ¼ä¸­çš„&quot;å­—ç¬¦&quot;</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%97%E5%BD%A2%E7%B0%87"><span class="toc-number">6.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯å­—å½¢ç°‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zwj-%E9%9B%B6%E5%AE%BD%E8%BF%9E%E6%8E%A5%E7%AC%A6"><span class="toc-number">6.2.</span> <span class="toc-text">ZWJï¼ˆé›¶å®½è¿æ¥ç¬¦ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%AD%97%E7%AC%A6%E4%B8%8E%E9%A2%84%E7%BB%84%E5%90%88%E5%AD%97%E7%AC%A6"><span class="toc-number">6.3.</span> <span class="toc-text">ç»„åˆå­—ç¬¦ä¸é¢„ç»„åˆå­—ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unicode-%E6%AD%A3%E8%A7%84%E5%8C%96%E5%BD%A2%E5%BC%8F"><span class="toc-number">6.4.</span> <span class="toc-text">Unicode æ­£è§„åŒ–å½¢å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-%E4%B8%AD%E5%A4%84%E7%90%86%E5%AD%97%E5%BD%A2%E7%B0%87"><span class="toc-number">6.5.</span> <span class="toc-text">Java ä¸­å¤„ç†å­—å½¢ç°‡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#part-7-%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2%E4%B8%8E%E4%B9%B1%E7%A0%81"><span class="toc-number">7.</span> <span class="toc-text">Part 7: ç¼–ç è½¬æ¢ä¸ä¹±ç </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#java-%E4%B8%AD%E7%9A%84%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2"><span class="toc-number">7.1.</span> <span class="toc-text">Java ä¸­çš„ç¼–ç è½¬æ¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E4%B9%B1%E7%A0%81%E5%9C%BA%E6%99%AF%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">7.2.</span> <span class="toc-text">å¸¸è§ä¹±ç åœºæ™¯ä¸è§£å†³æ–¹æ¡ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#charsetencoder-%E4%B8%8E-charsetdecoder-%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E7%AD%96%E7%95%A5"><span class="toc-number">7.3.</span> <span class="toc-text">CharsetEncoder ä¸ CharsetDecoder çš„é”™è¯¯å¤„ç†ç­–ç•¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql-%E7%9A%84-utf8-vs-utf8mb4"><span class="toc-number">7.4.</span> <span class="toc-text">MySQL çš„ utf8 vs utf8mb4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99%E7%9A%84%E7%BC%96%E7%A0%81%E5%A4%84%E7%90%86"><span class="toc-number">7.5.</span> <span class="toc-text">æ–‡ä»¶è¯»å†™çš„ç¼–ç å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#part-8-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E-unicode"><span class="toc-number">8.</span> <span class="toc-text">Part 8: æ­£åˆ™è¡¨è¾¾å¼ä¸ Unicode</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#java-%E6%AD%A3%E5%88%99%E7%9A%84-unicode-%E6%94%AF%E6%8C%81"><span class="toc-number">8.1.</span> <span class="toc-text">Java æ­£åˆ™çš„ Unicode æ”¯æŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unicode-character-class-%E6%A0%87%E5%BF%97"><span class="toc-number">8.2.</span> <span class="toc-text">UNICODE_CHARACTER_CLASS æ ‡å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%8C%B9%E9%85%8D"><span class="toc-number">8.3.</span> <span class="toc-text">å¤§å°å†™ä¸æ•æ„ŸåŒ¹é…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#part-9-%E5%9B%BD%E9%99%85%E5%8C%96-i18n-%E5%AE%9E%E8%B7%B5"><span class="toc-number">9.</span> <span class="toc-text">Part 9: å›½é™…åŒ–ï¼ˆi18nï¼‰å®è·µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#locale-%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="toc-number">9.1.</span> <span class="toc-text">Locale ä¸å­—ç¬¦ä¸²æ¯”è¾ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collator%EF%BC%9A%E8%AF%AD%E8%A8%80%E6%84%9F%E7%9F%A5%E7%9A%84%E6%8E%92%E5%BA%8F"><span class="toc-number">9.2.</span> <span class="toc-text">Collatorï¼šè¯­è¨€æ„ŸçŸ¥çš„æ’åº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E9%99%90%E5%88%B6%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.3.</span> <span class="toc-text">å­—ç¬¦ä¸²é•¿åº¦é™åˆ¶çš„æ­£ç¡®å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">10.</span> <span class="toc-text">æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#java-17-%E7%9A%84-unicode-%E7%89%88%E6%9C%AC%E6%94%AF%E6%8C%81%E6%83%85%E5%86%B5"><span class="toc-number">10.1.</span> <span class="toc-text">Java 17+ çš„ Unicode ç‰ˆæœ¬æ”¯æŒæƒ…å†µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">11.</span> <span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2017 - 2026 By magicliang</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">ç°¡</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.2"></script><script src="/js/main.js?v=5.5.2"></script><script src="/js/tw_cn.js?v=5.5.2"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="/"></script></div></body></html>