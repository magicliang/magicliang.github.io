<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>守株阁 - 一切都是守株待兔，如切如磋，如琢如磨。I am just joking.</title><meta name="author" content="magicliang"><meta name="copyright" content="magicliang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="关于技术以及人生">
<meta property="og:type" content="website">
<meta property="og:title" content="守株阁">
<meta property="og:url" content="https://magicliang.github.io/page/2/index.html">
<meta property="og:site_name" content="守株阁">
<meta property="og:description" content="关于技术以及人生">
<meta property="og:locale">
<meta property="og:image" content="https://magicliang.github.io/img/rei.jpeg">
<meta property="article:author" content="magicliang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://magicliang.github.io/img/rei.jpeg"><script type="application/ld+json"></script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://magicliang.github.io/page/2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: magicliang","link":"Link: ","source":"Source: 守株阁","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '守株阁',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'home'
}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="守株阁" type="application/atom+xml">
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(/img/eva-wallpaper.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">守株阁</span></a></span><div id="menus"></div></nav><div id="site-info"><h1 id="site-title">守株阁</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/magicliang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:magicliang@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts nc" id="recent-posts"><div class="recent-post-items"><div class="recent-post-item"><div class="post_cover left"><a href="/2025/05/17/Unix-Linux-%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%B8%B8%E8%A7%81%E7%9B%AE%E5%BD%95/" title="Unix/Linux 系统的常见目录"><img class="post-bg" src="/img/wall-paper-152.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unix/Linux 系统的常见目录"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/05/17/Unix-Linux-%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%B8%B8%E8%A7%81%E7%9B%AE%E5%BD%95/" title="Unix/Linux 系统的常见目录">Unix/Linux 系统的常见目录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-05-17T05:18:35.000Z" title="Created 2025-05-17 13:18:35">2025-05-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:33.085Z" title="Updated 2025-10-22 16:01:33">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Linux/">Linux</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Unix/">Unix</a></span></div><div class="content">一级目录    目录路径 缩写解释 / 全称 用途描述 常见子目录/示例     / Root 根目录，所有其他目录的起点 无   /bin Binaries 基础命令的二进制文件（所有用户必需） ls, cp, mv, cat   /boot Boot 系统启动文件（内核、引导加载程序） vmlinuz-*（内核文件）、grub/（GRUB配置）、initramfs   /dev Devices 设备文件（物理/虚拟设备接口） sda（磁盘）、tty（终端）、null（空设备）、random（随机数生成器）   /etc Etcetera 系统级配置文件（全局配置） passwd（用户账户）、fstab（挂载表）、apt/（APT包管理器配置）、ssh/   /home Home 用户主目录（个人文件和数据） /home/alice（用户 Alice 的目录）   /lib Libraries 基础共享库和内核模块（支持 /bin 和 /sbin） libc.so（C标准库）、modules/（内核模块）   /media Media 可移动设备挂载点（自动挂载） usb/（U...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2025/04/17/Kubernetes-%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B%EF%BC%9A%E4%BB%8E%E5%AE%B9%E5%99%A8%E5%88%B0%E4%BA%91%E5%8E%9F%E7%94%9F%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0%E7%9A%84%E6%95%85%E4%BA%8B/" title="Kubernetes 架构演进：从容器到云原生应用平台的故事"><img class="post-bg" src="/2025/04/17/Kubernetes-%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B%EF%BC%9A%E4%BB%8E%E5%AE%B9%E5%99%A8%E5%88%B0%E4%BA%91%E5%8E%9F%E7%94%9F%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0%E7%9A%84%E6%95%85%E4%BA%8B/k8s.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes 架构演进：从容器到云原生应用平台的故事"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/04/17/Kubernetes-%E6%9E%B6%E6%9E%84%E6%BC%94%E8%BF%9B%EF%BC%9A%E4%BB%8E%E5%AE%B9%E5%99%A8%E5%88%B0%E4%BA%91%E5%8E%9F%E7%94%9F%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0%E7%9A%84%E6%95%85%E4%BA%8B/" title="Kubernetes 架构演进：从容器到云原生应用平台的故事">Kubernetes 架构演进：从容器到云原生应用平台的故事</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-04-17T12:16:55.000Z" title="Created 2025-04-17 20:16:55">2025-04-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:33.085Z" title="Updated 2025-10-22 16:01:33">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/k8s/">k8s</a></span></div><div class="content">本文由 Claude-3.7-Sonnet 生成。 从裸机到容器：应对复杂性的演进 1. 物理服务器时代的困境 最初，应用程序直接部署在物理服务器上，导致：  资源利用率低下（一台服务器只运行一个应用） 环境一致性问题（“在我的机器上能运行”） 应用隔离性差  2. 虚拟机的改进 虚拟化技术出现，每台物理服务器可运行多个虚拟机：  提高了资源利用率 但启动慢、资源占用大  3. 容器(Container)的革命 容器技术解决了关键痛点：  轻量级（共享宿主机OS内核） 快速启动（秒级） 可移植性强（构建一次，到处运行） 资源占用小  但问题出现了： 当容器数量增长，单机管理变得困难，集群管理更是挑战。 Kubernetes组件的逐步演进 1. Pod：为什么不直接使用容器？ 容器本身有局限性：  单个容器难以满足应用的协作需求 需要将紧密关联的功能组合在一起  因此诞生了Pod：  Pod是最小部署单元，包含一个或多个容器 共享网络命名空间和存储卷 同一Pod中的容器总是在同一节点上运行 适合边车(sidecar)模式，如日志收集、代理容器  多容器Pod的深度实践 当我们需要在...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/02/18/Go-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="Go 语言学习"><img class="post-bg" src="/img/wall-paper-168.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go 语言学习"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/02/18/Go-%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="Go 语言学习">Go 语言学习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-02-18T12:56:11.000Z" title="Created 2025-02-18 20:56:11">2025-02-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:33.085Z" title="Updated 2025-10-22 16:01:33">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Go/">Go</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Golang/">Golang</a></span></div><div class="content">#《Go 语言编程》学习笔记 Herb Sutter 在2003年写的《免费午餐已经结束》，言犹在耳，尽量通过并发来压榨硬件性能是大势所趋。但是并发难写。 并发执行是有执行体的。process、thread 和 coroutine 都是执行体。线程是轻量级进程，协程是轻量级线程。但大多数语言在语法层面上并不支持创建协程，而通过库的方式支持的协程功能也不完善。Go 语言提供的协程叫 Goroutine。Go 语言标准库提供的所有系统调用（syscall）操作，当然也包括所有同步 IO 操作，都会出让 CPU 给其他 goroutine，这让事情变得非常简单（哪里简单了，它自动产生了 yield 吗？）。 执行体间的通信，包括几个方式：  执行体之间的互斥与同步 执行体之间的消息传递  执行体之间存在共享资源时，为保证内存访问逻辑的确定性，需要对访问该共享资源的相关执行体进行互斥。当多个执行体之间的逻辑存在时序上的依赖时，也往往需要在执行体之间进行同步。护持与同步是执行体间最基础的交互方式。 在并发编程模型的选择上，有两个流派，一个是共享内存模型，一个是消息传递模型。多数传统语言选择...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2025/01/20/%E7%A7%A6%E6%99%96%EF%BC%9A21%E4%B8%96%E7%BA%AA%E5%85%A8%E7%90%83%E5%8C%96%E5%8D%B1%E6%9C%BA/" title="秦晖：21世纪全球化危机"><img class="post-bg" src="/2025/01/20/%E7%A7%A6%E6%99%96%EF%BC%9A21%E4%B8%96%E7%BA%AA%E5%85%A8%E7%90%83%E5%8C%96%E5%8D%B1%E6%9C%BA/382.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="秦晖：21世纪全球化危机"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/01/20/%E7%A7%A6%E6%99%96%EF%BC%9A21%E4%B8%96%E7%BA%AA%E5%85%A8%E7%90%83%E5%8C%96%E5%8D%B1%E6%9C%BA/" title="秦晖：21世纪全球化危机">秦晖：21世纪全球化危机</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-01-20T04:17:10.000Z" title="Created 2025-01-20 12:17:10">2025-01-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:33.084Z" title="Updated 2025-10-22 16:01:33">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%94%BF%E6%B2%BB/">政治</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3/">他山之石</a></span></div><div class="content">本文原载思想，引自公众号。 2018年4月2日晚，清华大学人文学院历史系教授秦晖在上海喜马拉雅美术馆发表了题为“21世纪的全球化危机”的学术演讲。秦晖教授认为，全球化在西方那里造成了社会不平等的加剧，在中国这里本来应该增加社会平等的一些功能，也没有真正能够落实。这样，全球化在全球都造成了不平等加剧的现象。秦晖教授提醒听众，在全球化进行了一段时间以后，如果我们说，以前中国改革决定的是中国的命运的话，那么现在，中国改革在某种意义上还决定着世界的命运，决定着全球化到底趋向于一种良性的进步，还是趋向于劣币驱逐良币。以下为演讲内容： 今天晚上我们讲的是21世纪的全球化危机，当然也可以说是困境。 从两三年前开始，就是2016年吧，大家就开始感到，有很多异乎寻常的事情发生。第一件事，英国脱欧，这个事情出乎很多人意料。当时的英国保守党政府本来的估计是大家会反对脱欧，但结果在脱欧公投中，脱欧居然就是成为多数的民意。 再就是，美国选出一个既不是传统左派、也不是传统右派的奇葩总统，这也是出乎很多人意料的。而且他上台以后提出的一系列主张也非常令人吃惊，不管是传统的左派还是右派，不管是民主党的主流派还是共...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2025/01/13/%E7%81%B5%E6%9C%BA%E4%B8%80%E5%8A%A8%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" title="灵机一动的程序设计"><img class="post-bg" src="/img/wall-paper-125.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="灵机一动的程序设计"></a></div><div class="recent-post-info"><a class="article-title" href="/2025/01/13/%E7%81%B5%E6%9C%BA%E4%B8%80%E5%8A%A8%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" title="灵机一动的程序设计">灵机一动的程序设计</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-01-13T03:05:41.000Z" title="Created 2025-01-13 11:05:41">2025-01-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:33.084Z" title="Updated 2025-10-22 16:01:33">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%A5%87%E6%80%9D%E5%A6%99%E6%83%B3/">奇思妙想</a></span></div><div class="content">怎样用此列表来排序彼列表 123456789101112131415161718192021222324252627282930313233private List&lt;TagGroup&gt; reorder(Long id, List&lt;TagGroup&gt; entities) &#123;    final AccountSettings accountSettings = getAccountSetting(            id);    final List&lt;Long&gt; tagGroupOrders = accountSettings.getTagGroupOrders();    // 根据 tagGroupOrders 里提供的 tagGroupId 对 entities 排序    if (CollectionUtils.isNotEmpty(tagGroupOrders)) &#123;        entities.sort((o1, o2) -&gt; &#123;            int index1 = tagGro...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/11/04/Redis-%E5%BC%80%E5%8F%91%E4%B8%8E%E8%BF%90%E7%BB%B4/" title="Redis 开发与运维"><img class="post-bg" src="/2024/11/04/Redis-%E5%BC%80%E5%8F%91%E4%B8%8E%E8%BF%90%E7%BB%B4/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis 开发与运维"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/11/04/Redis-%E5%BC%80%E5%8F%91%E4%B8%8E%E8%BF%90%E7%BB%B4/" title="Redis 开发与运维">Redis 开发与运维</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-11-04T12:10:16.000Z" title="Created 2024-11-04 20:10:16">2024-11-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:33.029Z" title="Updated 2025-10-22 16:01:33">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Redis/">Redis</a></span></div><div class="content">Redis 特性 Redis 高性能的原因 Redis 的读写性能达到 10w/s，主要基于以下原因：  数据主要放在内存中。 Redis 使用距离 OS “层次更近”的 C 语言实现。 Redis 使用单线程架构，没有很高的 lock contention。 IO 多路复用技术 Redis 的代码实现得优雅而兼顾性能  Redis 的数据结构 Redis 本身是 Remote Dictionary Server 的简称，其中，老的、常见的数据结构有：  字符串 哈希 列表 set（集合） zset（有序集合）  但后来追加了几种新颖的数据机构，包括：bitmap、hyperloglog，更后来更添加了 GEO 地理信息相关的工具。 基于这些数据结构，我们可以实现一些常见的功能：  键过期，可以用来实现缓存，进而实现分布式锁。 发布订阅功能，进而实现消息系统（TODO）。 Lua 脚本功能，可以实现自定义的 Redis 命令（TODO）。 实现简单的事务功能，能在一定程度上实现事务特性。 提供流水线功能，能够让客户端一次性把一批命令一次性上传到 Redis 里，能够合并 IO 并...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/11/01/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9B%B8%E5%85%B3/" title="大模型相关"><img class="post-bg" src="/2024/11/01/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9B%B8%E5%85%B3/%E5%A4%A7%E6%A8%A1%E5%9E%8B.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大模型相关"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/11/01/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%9B%B8%E5%85%B3/" title="大模型相关">大模型相关</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-11-01T13:30:24.000Z" title="Created 2024-11-01 21:30:24">2024-11-01</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:33.003Z" title="Updated 2025-10-22 16:01:33">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/AI/">AI</a></span></div><div class="content">世界线  大模型发展.xmind   RNN的雏形可以追溯到90年代Jeffrey L.Elman的经典文章：Finding Structure in Time（1990） 2013年Google提出的Word2Vec可能是最为人熟知的Embedding技术之一 Encoder-Decoder架构来自论文：Learning Phrase Representations using RNN Encoder-Decoder for Statistical Machine Translation（2014） 注意力机制参考论文：Neural Machine Translation by Jointly Learning to Align and Translate（2014） LLM的技术发展和相互关系：Harnessing the Power of LLMs in Practice: A Survey on ChatGPT and Beyond（2023） Transformer出自一篇经典论文：Attention Is All You Need（2017） 国外模型的对比可以参考大...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/10/25/%E9%9B%85%E6%80%9D%E8%8B%B1%E8%AF%AD/" title="雅思英语"><img class="post-bg" src="/2024/10/25/%E9%9B%85%E6%80%9D%E8%8B%B1%E8%AF%AD/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="雅思英语"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/10/25/%E9%9B%85%E6%80%9D%E8%8B%B1%E8%AF%AD/" title="雅思英语">雅思英语</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-10-25T11:47:49.000Z" title="Created 2024-10-25 19:47:49">2024-10-25</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.993Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%8B%B1%E8%AF%AD/">英语</a></span></div><div class="content">英语.xmind  </div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/10/09/%E4%B8%8D%E5%90%8C%E6%97%B6%E5%8C%BA/" title="不同时区"><img class="post-bg" src="/2024/10/09/%E4%B8%8D%E5%90%8C%E6%97%B6%E5%8C%BA/cover.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="不同时区"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/10/09/%E4%B8%8D%E5%90%8C%E6%97%B6%E5%8C%BA/" title="不同时区">不同时区</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-10-09T10:59:51.000Z" title="Created 2024-10-09 18:59:51">2024-10-09</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.991Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%8B%B1%E8%AF%AD/">英语</a></span></div><div class="content">纽约时间比加州时间早三个小时， New York is 3 hours ahead of California, 但加州时间并没有变慢。 but it does not make Californiaslow. 有人22岁就毕业了， Someone graduated at the age of 22, 但等了五年才找到好的工作！ but waited 5 years before securing a good job!  有人25岁就当上CEO， Someone became a CEO at 25, 却在50岁去世。 and died at 50. 也有人50岁才当上CEO， While another became a CEO at 50, 然后活到90岁。 and lived to 90 years. 有人依然单身， Someone is still single, 同时也有人已婚。 while someone else got married. 奥巴马55岁就退休， Obama retires at 55, 川普70岁才开始当总统。 but Trump starts ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/10/07/%E9%AB%98%E7%BA%A7%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/" title="高级算法设计和分析技术"><img class="post-bg" src="/2024/10/07/%E9%AB%98%E7%BA%A7%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="高级算法设计和分析技术"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/10/07/%E9%AB%98%E7%BA%A7%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%88%86%E6%9E%90%E6%8A%80%E6%9C%AF/" title="高级算法设计和分析技术">高级算法设计和分析技术</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-10-07T11:42:09.000Z" title="Created 2024-10-07 19:42:09">2024-10-07</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.967Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%AE%97%E6%B3%95/">算法</a></span></div><div class="content">思维导图 常见算法题 常见算法题.xmind 常用数学公式    公式 名称 说明     ∑i=1ni=n(n+1)2\sum\limits_{i=1}^{n}i=\frac{n(n+1)}{2}i=1∑n​i=2n(n+1)​ 等差数列和 1+2+3+…+n   ∑i=1n(2i−1)=n2\sum\limits_{i=1}^{n}(2i-1)=n^{2}i=1∑n​(2i−1)=n2 奇数和 1+3+5+…+(2n-1)   ∑i=1ni2=n(n+1)(2n+1)6\sum\limits_{i=1}^{n}i^{2}=\frac{n(n+1)(2n+1)}{6}i=1∑n​i2=6n(n+1)(2n+1)​ 平方和 12+22+32+...+n21^{2}+2^{2}+3^{2}+...+n^{2}12+22+32+...+n2   ∑i=1ni3=(n(n+1)2)2\sum\limits_{i=1}^{n}i^{3}=\left(\frac{n(n+1)}{2}\right)^{2}i=1∑n​i3=(2n(n+1)​)2 立方和 等于平方和的平方   ∑i=0n−1...</div></div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/#content-inner">34</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/rei.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">magicliang</div><div class="author-info-description">关于技术以及人生</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">338</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">197</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/magicliang"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/magicliang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:magicliang@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">人生只是，守株待兔</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式事务"><img src="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/3pc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式事务"/></a><div class="content"><a class="title" href="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式事务">分布式事务</a><time datetime="2025-09-13T15:06:11.000Z" title="Created 2025-09-13 23:06:11">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/13/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" title="系统设计"><img src="/img/wall-paper-48.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="系统设计"/></a><div class="content"><a class="title" href="/2025/09/13/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" title="系统设计">系统设计</a><time datetime="2025-09-13T08:07:11.000Z" title="Created 2025-09-13 16:07:11">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/04/%E3%80%8A%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E%E3%80%8B/" title="《编程之美》"><img src="/img/wall-paper-23.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《编程之美》"/></a><div class="content"><a class="title" href="/2025/08/04/%E3%80%8A%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E%E3%80%8B/" title="《编程之美》">《编程之美》</a><time datetime="2025-08-04T07:53:32.000Z" title="Created 2025-08-04 15:53:32">2025-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/01/Grokking-the-System-Design/" title="Grokking the System Design"><img src="/img/wall-paper-20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Grokking the System Design"/></a><div class="content"><a class="title" href="/2025/08/01/Grokking-the-System-Design/" title="Grokking the System Design">Grokking the System Design</a><time datetime="2025-08-01T04:14:07.000Z" title="Created 2025-08-01 12:14:07">2025-08-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/29/%E6%88%91%E4%B8%8E-AI-%E7%9A%84%E9%97%AE%E7%AD%94/" title="我与 AI 的问答"><img src="/img/wall-paper-113.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="我与 AI 的问答"/></a><div class="content"><a class="title" href="/2025/07/29/%E6%88%91%E4%B8%8E-AI-%E7%9A%84%E9%97%AE%E7%AD%94/" title="我与 AI 的问答">我与 AI 的问答</a><time datetime="2025-07-29T07:05:34.000Z" title="Created 2025-07-29 15:05:34">2025-07-29</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/MyBatis/" style="font-size: 1.1em; color: #999">MyBatis</a> <a href="/tags/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/" style="font-size: 1.1em; color: #999">自我提升</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.1em; color: #999">前端</a> <a href="/tags/ubuntu/" style="font-size: 1.1em; color: #999">ubuntu</a> <a href="/tags/%E6%8F%92%E4%BB%B6%E5%8C%96/" style="font-size: 1.1em; color: #999">插件化</a> <a href="/tags/Lombok/" style="font-size: 1.1em; color: #999">Lombok</a> <a href="/tags/Storm/" style="font-size: 1.1em; color: #999">Storm</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 1.16em; color: #999b9e">读书笔记</a> <a href="/tags/%E4%BA%9A%E9%A9%AC%E9%80%8A/" style="font-size: 1.16em; color: #999b9e">亚马逊</a> <a href="/tags/hexo/" style="font-size: 1.1em; color: #999">hexo</a> <a href="/tags/JVM/" style="font-size: 1.5em; color: #99a9bf">JVM</a> <a href="/tags/JIT/" style="font-size: 1.1em; color: #999">JIT</a> <a href="/tags/Linux/" style="font-size: 1.33em; color: #99a2af">Linux</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 1.1em; color: #999">数据分析</a> <a href="/tags/%E7%BB%8F%E6%B5%8E/" style="font-size: 1.33em; color: #99a2af">经济</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.27em; color: #99a0a9">操作系统</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/" style="font-size: 1.1em; color: #999">虚拟化</a> <a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/" style="font-size: 1.1em; color: #999">云原生</a> <a href="/tags/%E8%AF%BA%E5%85%B0/" style="font-size: 1.1em; color: #999">诺兰</a> <a href="/tags/SQL/" style="font-size: 1.1em; color: #999">SQL</a> <a href="/tags/git/" style="font-size: 1.1em; color: #999">git</a> <a href="/tags/%E6%94%BF%E6%B2%BB/" style="font-size: 1.1em; color: #999">政治</a> <a href="/tags/%E4%BA%BA%E7%94%9F/" style="font-size: 1.1em; color: #999">人生</a> <a href="/tags/Spring/" style="font-size: 1.44em; color: #99a7ba">Spring</a> <a href="/tags/%E6%96%87%E5%AD%A6/" style="font-size: 1.33em; color: #99a2af">文学</a> <a href="/tags/Corda/" style="font-size: 1.1em; color: #999">Corda</a> <a href="/tags/%E4%BC%9A%E8%AE%A1/" style="font-size: 1.16em; color: #999b9e">会计</a> <a href="/tags/Scala/" style="font-size: 1.21em; color: #999ea4">Scala</a> <a href="/tags/IOTA/" style="font-size: 1.1em; color: #999">IOTA</a> <a href="/tags/github/" style="font-size: 1.1em; color: #999">github</a> <a href="/tags/%E9%A2%86%E5%9F%9F%E5%BB%BA%E6%A8%A1/" style="font-size: 1.16em; color: #999b9e">领域建模</a> <a href="/tags/KOA/" style="font-size: 1.1em; color: #999">KOA</a> <a href="/tags/%E5%B9%BD%E9%BB%98/" style="font-size: 1.1em; color: #999">幽默</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.21em; color: #999ea4">数学</a> <a href="/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">推荐系统</a> <a href="/tags/%E7%AE%A1%E7%90%86/" style="font-size: 1.39em; color: #99a4b4">管理</a> <a href="/tags/FinTech/" style="font-size: 1.16em; color: #999b9e">FinTech</a> <a href="/tags/%E9%AB%98%E6%80%A7%E8%83%BD/" style="font-size: 1.1em; color: #999">高性能</a> <a href="/tags/JUnit/" style="font-size: 1.1em; color: #999">JUnit</a> <a href="/tags/%E6%95%B0%E6%8D%AE/" style="font-size: 1.1em; color: #999">数据</a></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>Archives</span>
      <a class="card-more-btn" href="/archives/"
            title="View More">
            <i class="fas fa-angle-right"></i>
          </a>
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/09/">
            <span class="card-archive-list-date">
              September 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/08/">
            <span class="card-archive-list-date">
              August 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/07/">
            <span class="card-archive-list-date">
              July 2025
            </span>
            <span class="card-archive-list-count">5</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/05/">
            <span class="card-archive-list-date">
              May 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/04/">
            <span class="card-archive-list-date">
              April 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/02/">
            <span class="card-archive-list-date">
              February 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/01/">
            <span class="card-archive-list-date">
              January 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2024/11/">
            <span class="card-archive-list-date">
              November 2024
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Website Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article Count :</div><div class="item-count">338</div></div><div class="webinfo-item"><div class="item-name">Total Word Count :</div><div class="item-count">1227.1k</div></div><div class="webinfo-item"><div class="item-name">Unique Visitors :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Page Views :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-10-22T12:10:49.448Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2017 - 2025 By magicliang</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">簡</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>