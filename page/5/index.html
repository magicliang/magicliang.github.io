<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>守株阁 - 一切都是守株待兔，如切如磋，如琢如磨。I am just joking.</title><meta name="author" content="magicliang"><meta name="copyright" content="magicliang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="关于技术以及人生">
<meta property="og:type" content="website">
<meta property="og:title" content="守株阁">
<meta property="og:url" content="https://magicliang.github.io/page/5/index.html">
<meta property="og:site_name" content="守株阁">
<meta property="og:description" content="关于技术以及人生">
<meta property="og:locale">
<meta property="og:image" content="https://magicliang.github.io/img/rei.jpeg">
<meta property="article:author" content="magicliang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://magicliang.github.io/img/rei.jpeg"><script type="application/ld+json"></script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://magicliang.github.io/page/5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: magicliang","link":"Link: ","source":"Source: 守株阁","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '守株阁',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'home'
}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="守株阁" type="application/atom+xml">
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(/img/eva-wallpaper.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">守株阁</span></a></span><div id="menus"></div></nav><div id="site-info"><h1 id="site-title">守株阁</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/magicliang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:magicliang@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts nc" id="recent-posts"><div class="recent-post-items"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/08/20/%E5%88%86%E6%89%8B%E7%9A%84%E5%86%B3%E5%BF%83/" title="分手的决心"><img class="post-bg" src="/2022/08/20/%E5%88%86%E6%89%8B%E7%9A%84%E5%86%B3%E5%BF%83/%E5%88%86%E6%89%8B%E7%9A%84%E5%86%B3%E5%BF%835.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分手的决心"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/08/20/%E5%88%86%E6%89%8B%E7%9A%84%E5%86%B3%E5%BF%83/" title="分手的决心">分手的决心</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-08-20T10:38:55.000Z" title="Created 2022-08-20 18:38:55">2022-08-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.885Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%BD%B1%E8%AF%84/">影评</a></span></div><div class="content">《分手的决心》，是内地拍不出来的电影。 但这个戏要拿奥斯卡，还差几分火候。 在人物情感线的架设、展开上，这部片运用了很多悬疑片的技巧来讲了一个东方审美下的爱情故事，是弱推理，非本格派的拍法-大量故事的悬疑要素来源于人物自身的性格带来的视角偏差，但也有很多冷峻的镜头，减弱悬疑和爱情这两类要素混搭在一起的情感强度，让这个戏的情感张力分布得更加平均，让最后剧情的几个高潮的情感冲击在观众的眼里被烘托得更加自然。但是这个故事要拿奥斯卡奖，很难，它对了东方人的胃口，就未必那么对西方人的胃口了。 我看这个戏，主要是为了汤唯，所以重点讲讲汤唯。我甚至觉得导演拍这个戏，是先有的汤唯，才有的宋徐来。汤唯可能是那种大导眼里，能够带出名角色，传世佳作的女演员-如果本身演技不够，也要强改剧本，贴着演员特质的边来设计角色，量身定做人物的命运，强行让演员最出彩的一面在角色身上绽放出来的那种女演员。看到宋徐来，我会想到《黄金时代》里的萧红，会想到《晚秋》里的安娜，《分手的决心》甚至可以另起一个名字，叫作《萧红杀人事件》。 宋徐来这个角色代表了某些导演对女性的想象：美艳但又不夺目，表面上看起来弱小，只能任由命运摆...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/22/%E4%BD%A0%E7%9A%84%E7%AD%94%E6%A1%88%E5%9C%A8%E4%BD%A0%E7%9A%84%E5%AE%87%E5%AE%99%E9%87%8C/" title="你的答案在你的宇宙里"><img class="post-bg" src="/2022/05/22/%E4%BD%A0%E7%9A%84%E7%AD%94%E6%A1%88%E5%9C%A8%E4%BD%A0%E7%9A%84%E5%AE%87%E5%AE%99%E9%87%8C/be-a-rock.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="你的答案在你的宇宙里"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/22/%E4%BD%A0%E7%9A%84%E7%AD%94%E6%A1%88%E5%9C%A8%E4%BD%A0%E7%9A%84%E5%AE%87%E5%AE%99%E9%87%8C/" title="你的答案在你的宇宙里">你的答案在你的宇宙里</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-05-22T10:07:08.000Z" title="Created 2022-05-22 18:07:08">2022-05-22</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.884Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%BD%B1%E8%AF%84/">影评</a></span></div><div class="content">《瞬息全宇宙》这个电影不如我预期的好，可能是我预期太高了。它用了非常多的符号和镜头切换来合理化逻辑论证的跳脱，这是很多观众不易接纳的（特别是中国观众）。当然它最后讲出来的仍然是好莱坞这些年念兹在兹的人生真谛：不要去思考人生的问题，因为不够好的东西是注定的，好的人生是 you enjoy it 的人生。这也是中国观众早已习以为常的耳边风。所以这个片子自从网飞开片，中国本土观众可以收看以来，在豆瓣的评分一直往下掉，中国人因为离不开这种人生真谛给它打高分，又因为厌倦了这种人生真谛，给不了多么高的分数。 很多人的生存哲学是：我将如何通过摆烂获得peace或者我将如何通过奋斗（struggle）来获得 peace。但我们的人生体验告诉我们，无论哪种方法都不算peace，而且快乐是短暂的，悲伤是长久的。人生绝大部分快乐总是一下子就消散掉了，悲伤对人的消极影响通常是沉浸式的，悲伤甚至可以改变一个人的人格，而快乐永远做不到这一点。人们渴望的快乐是简单纯粹而彻底安全的，人为了获得这一点会拼命需要别人给自己供养安全感，这种安全感就是我们心中的爱。而所有人学会渴求爱的行为模式，都是从家庭的教养中来的。...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/14/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E9%97%AE%E9%A2%98/" title="可观测性问题"><img class="post-bg" src="/2022/05/14/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E9%97%AE%E9%A2%98/MTL.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="可观测性问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/14/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7%E9%97%AE%E9%A2%98/" title="可观测性问题">可观测性问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-05-14T07:12:17.000Z" title="Created 2022-05-14 15:12:17">2022-05-14</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.874Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%9B%91%E6%8E%A7/">监控</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%8F%AF%E8%A7%82%E6%B5%8B%E6%80%A7/">可观测性</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/">链路追踪</a></span></div><div class="content">可观测性 现代的可观测性（Observability）等于以下三者的集合。   可观测性概念起源于控制理论中的可观察性（observability）  系统的可观测性，指该系统可以由其外部输出推断其内部状态的程度 某一个系统的可观测性越强，那么我们对这个系统的把控能力也会越强    需要明确，监控是一个动作。  目前认为，一个完整的可观测性系统，具备输出三种类型数据的能力：metrics、log、trace。 实际上，metrics、log、trace只是三种数据类型，本身与可观测性无关。仅仅是收集这些类型的数据，并不能保证系统的可观测性。 但是将这些数据进行合理的收集、存储、分析和利用，就容易使系统具有一定的可观测性。因此这些数据，又被称为可观测数据。  定义：  metrics指标：是原子性的、可累加的一种值，用于表示在⼀段时间内测量的数值，每个metrics都是一个逻辑计量单元。 trace链路追踪：又称分布式链路追踪，表示 请求通过分布式系统 的端到端的路径。 log日志：用于描述一些离散的（不连续的）事件，是对特定时间发⽣的事件的⽂本记录。  特性：  metrics ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/12/Dapper-%E8%AE%BA%E6%96%87/" title="Dapper 论文"><img class="post-bg" src="/2022/05/12/Dapper-%E8%AE%BA%E6%96%87/img1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Dapper 论文"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/12/Dapper-%E8%AE%BA%E6%96%87/" title="Dapper 论文">Dapper 论文</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-05-12T08:28:59.000Z" title="Created 2022-05-12 16:28:59">2022-05-12</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.864Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E8%BF%BD%E8%B8%AA/">分布式追踪</a></span></div><div class="content"> 参考译文 dapper分布式跟踪系统原文  概述 当代的互联网的服务，通常都是用复杂的、大规模分布式集群来实现的。互联网应用构建在不同的软件模块集上，这些软件模块，有可能是由不同的团队开发、可能使用不同的编程语言来实现、有可能部署在了几千台服务器，横跨多个不同的数据中心。因此，就需要一些可以帮助理解系统行为、用于分析性能问题的工具。 Dapper–Google生产环境下的分布式跟踪系统，应运而生。那么我们就来介绍一个大规模集群的跟踪系统，它是如何满足一个低开销、应用透明的、大范围部署这三个需求的。当然Dapper设计之初，参考了一些其他分布式系统的理念，尤其是Magpie和X-Trace，但是我们之所以能成功应用在生产环境上，还需要一些画龙点睛之笔，例如采样率的使用以及把代码植入限制在一小部分公共库的改造上。 介绍 我们开发Dapper是为了收集更多的复杂分布式系统的行为信息，然后呈现给Google的开发者们。这样的分布式系统有一个特殊的好处，因为那些大规模的低端服务器，作为互联网服务的载体，是一个特殊的经济划算的平台。想要在这个上下文中理解分布式系统的行为，就需要监控那些横跨...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/10/%E9%87%8D%E5%86%99-ELK-%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF/" title="重写 ELK 相关信息"><img class="post-bg" src="/2022/05/10/%E9%87%8D%E5%86%99-ELK-%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF/elasticsearch.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="重写 ELK 相关信息"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/10/%E9%87%8D%E5%86%99-ELK-%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF/" title="重写 ELK 相关信息">重写 ELK 相关信息</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-05-10T10:04:53.000Z" title="Created 2022-05-10 18:04:53">2022-05-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.850Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Elasticsearch/">Elasticsearch</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Logstash/">Logstash</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Kibana/">Kibana</a></span></div><div class="content">ELK in docker 官方文档见：《Running the Elastic Stack (“ELK”) on Docker》 Start Elasticsearch and Kibana in Docker 任意在容器中启动的单节点 Elasticsearch 集群都会 security will be automatically enabled and configured for you。这包括：  证书和key会在配置目录下自动生成。Certificates and keys are generated for the transport and HTTP layers.``When you install Elasticsearch, the following certificates and keys are generated in the Elasticsearch configuration directory, which are used to connect a Kibana instance to your secured Elasticsearc...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/10/%E4%B8%80%E4%B8%AA%E9%9A%90%E8%97%8F%E4%BA%8617%E5%B9%B4%E7%9A%84-JDK-Bug/" title="一个隐藏了17年的 JDK Bug"><img class="post-bg" src="/2022/05/10/%E4%B8%80%E4%B8%AA%E9%9A%90%E8%97%8F%E4%BA%8617%E5%B9%B4%E7%9A%84-JDK-Bug/%E4%BE%9D%E6%97%A7%E6%97%A0%E9%99%90%E9%98%BB%E5%A1%9E.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一个隐藏了17年的 JDK Bug"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/10/%E4%B8%80%E4%B8%AA%E9%9A%90%E8%97%8F%E4%BA%8617%E5%B9%B4%E7%9A%84-JDK-Bug/" title="一个隐藏了17年的 JDK Bug">一个隐藏了17年的 JDK Bug</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-05-10T09:41:59.000Z" title="Created 2022-05-10 17:41:59">2022-05-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.848Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%8D%89%E8%99%AB/">捉虫</a></span></div><div class="content">摘要 本文介绍了发现JDK-8286463 : DiscardPolicy may block invokeAll forever的全过程。 问题起因 因为工作需要，笔者最近考虑利用 Java 标准文档里的标准 API做一个批量执行任务的框架：  这个 API 的语义是：  批量执行任务。 在任务执行完成（不管任务是被正常终止还是异常终止）后，批量返回一个持有任务状态的 Future 列表。  我们团队内部的代码里已经有了一个自定义线程池的工厂方法，大义是： 1234567891011121314151617181920212223242526272829303132333435363738394041/** * 一个有缺陷的线程池构造器 * * @param corePoolSize      the number of threads to keep in the pool, even *                          if they are idle, unless &#123;@code allowCoreThreadTimeOut&#125; is ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/09/Lombok-%E6%8B%BE%E9%81%97/" title="Lombok 拾遗"><img class="post-bg" src="/2022/05/09/Lombok-%E6%8B%BE%E9%81%97/lombok.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lombok 拾遗"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/09/Lombok-%E6%8B%BE%E9%81%97/" title="Lombok 拾遗">Lombok 拾遗</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-05-09T02:56:36.000Z" title="Created 2022-05-09 10:56:36">2022-05-09</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.847Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Lombok/">Lombok</a></span></div><div class="content">sneakyThrow 12345678public static RuntimeException sneakyThrow(Throwable t) &#123;        if (t == null) throw new NullPointerException(&quot;t&quot;);        return Lombok.&lt;RuntimeException&gt;sneakyThrow0(t);    &#125;    private static &lt;T extends Throwable&gt; T sneakyThrow0(Throwable t) throws T &#123;        throw (T)t;    &#125;</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/04/25/%E5%9F%BA%E4%BA%8E-Play-%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91/" title="基于 Play 框架进行开发"><img class="post-bg" src="/2022/04/25/%E5%9F%BA%E4%BA%8E-Play-%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91/%E5%8A%A0%E8%BD%BD%E8%B0%83%E8%AF%95%E5%99%A8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 Play 框架进行开发"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/25/%E5%9F%BA%E4%BA%8E-Play-%E6%A1%86%E6%9E%B6%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%8F%91/" title="基于 Play 框架进行开发">基于 Play 框架进行开发</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-04-25T10:52:40.000Z" title="Created 2022-04-25 18:52:40">2022-04-25</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.846Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Play/">Play</a></span></div><div class="content">构建和编译的方法 sbt clean &quot;project leads-web&quot; &quot;universal:packageZipTarball&quot; 常用命令 1234567891011121314151617# 在 sbt 里# 刷新命令reload;update;clean;compile# 切换到项目 aproject a# 在 sbt 的项目 a 里run &quot;-Dotel.resource.attributes=serviceName=iouy&quot;# 如果使用了 coursier 来管理依赖的话，查看依赖coursierDependencyTree# 在普通的 shell 里# 开启远程调试sbt -jvm-debug 9999 run# 传递 jvm 参数sbt -J-javaagent:skywalking-agent.jar -jvm-debug 9999 run   ORM ebean 1234567891011121314151617181920212223242526lazy val `model-base` = ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/03/29/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E6%B1%87%E6%80%BB/" title="领域驱动设计汇总"><img class="post-bg" src="/2022/03/29/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E6%B1%87%E6%80%BB/%E5%A4%A7%E5%B9%82%E5%B9%82.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="领域驱动设计汇总"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/03/29/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E6%B1%87%E6%80%BB/" title="领域驱动设计汇总">领域驱动设计汇总</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-03-29T07:49:06.000Z" title="Created 2022-03-29 15:49:06">2022-03-29</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.693Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/DDD/">DDD</a></span></div><div class="content">总结 DDD 主要是面向对象范式的高级应用。 分治、分层、抽象、演化是架构设计的4大原则。  分治是为了让复杂度变小，而且围绕单一的中心概念具有内聚，又通过边界区别彼此。在DDD中，在解决规模性问题，防止模型出现分裂-矛盾和重复的时候，使用战略设计：上下文（支持边界，天然为微服务服务，这里的上下文边界也是组织架构的边界，也强调团队管理）、精炼（围绕核心域的种种动作）、大型结构（分层在这里被强调）。战术设计则是围绕各种职责类型，强调程序的构造块。 分层 主要依赖于大型结构和模型驱动设计提到的 flexible layered architecture。 抽象意味着永远留有余地，核心越薄越好，这也是精炼要求的。 演化在这里则体现为，允许系统设计不断通过重构来精化模型。  在 DDD 的原书里面，为了防止模型出问题，才逐渐引入战略设计。 但别的 DDD 书籍里面，作者们都主张直接从战略设计入手。 DDD 官网   真实的架构是由项目需求驱动出来的。  左半段最外层叫 interface 层；右半段最外层叫 infra 层。左半段的 bus 是 command query bus，右半段...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/03/18/%E5%A6%82%E4%BD%95%E5%86%99%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81/" title="如何写业务代码"><img class="post-bg" src="/2022/03/18/%E5%A6%82%E4%BD%95%E5%86%99%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F%E4%B8%8E%E9%A2%86%E5%9F%9F%E7%B3%BB%E7%BB%9F.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何写业务代码"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/03/18/%E5%A6%82%E4%BD%95%E5%86%99%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81/" title="如何写业务代码">如何写业务代码</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-03-18T05:56:48.000Z" title="Created 2022-03-18 13:56:48">2022-03-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.691Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/">系统架构</a></span></div><div class="content">业务研发面对的问题  稳定的业务模式 不稳定的需求 业务对交付的渴望  假设  命名规范（《clean code》） 面向对象设计（SOLID原则、贫血/充血模型、设计模式）  系统要拆分  流程控制系统与领域系统.drawio  每一个用例（解决的一个问题）都由访问逻辑和执行逻辑组成。访问逻辑负责用例执行的顺序与分支，并调用执行逻辑完成完整业务逻辑。 访问逻辑由单独的交易系统负责。执行逻辑由个子系统负责。  工程要拆分 三层架构 + 洋葱架构 代码要拆分  业务代码：描述核心业务逻辑的代码，核心是保持业务的流程及业务状态的一致性 领域对象与领域服务，不得对外部有任何依赖（工具类除外） 最核心的几个抽象： 校验：参数有效性校验、参数的业务属性校验。在进入正常业务逻辑代码前，完成所有的校验工作。 异常：业务异常：所有不符合业务逻辑而产生的异常。 系统异常：因为程序本身or依赖产生的异常。 所有的异常第一位runningtime异常。 数据:  业务数据：保存领域对象状态的数据。 非业务数据：过程数据。业务的核心流程中，只对业务数据的持久化负责。 参数：任何时候，任何方法的参数都需要...</div></div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/#content-inner">34</a><a class="extend next" rel="next" href="/page/6/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/rei.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">magicliang</div><div class="author-info-description">关于技术以及人生</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">338</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">197</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/magicliang"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/magicliang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:magicliang@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">人生只是，守株待兔</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式事务"><img src="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/3pc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式事务"/></a><div class="content"><a class="title" href="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式事务">分布式事务</a><time datetime="2025-09-13T15:06:11.000Z" title="Created 2025-09-13 23:06:11">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/13/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" title="系统设计"><img src="/img/wall-paper-48.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="系统设计"/></a><div class="content"><a class="title" href="/2025/09/13/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" title="系统设计">系统设计</a><time datetime="2025-09-13T08:07:11.000Z" title="Created 2025-09-13 16:07:11">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/04/%E3%80%8A%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E%E3%80%8B/" title="《编程之美》"><img src="/img/wall-paper-23.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《编程之美》"/></a><div class="content"><a class="title" href="/2025/08/04/%E3%80%8A%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E%E3%80%8B/" title="《编程之美》">《编程之美》</a><time datetime="2025-08-04T07:53:32.000Z" title="Created 2025-08-04 15:53:32">2025-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/01/Grokking-the-System-Design/" title="Grokking the System Design"><img src="/img/wall-paper-20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Grokking the System Design"/></a><div class="content"><a class="title" href="/2025/08/01/Grokking-the-System-Design/" title="Grokking the System Design">Grokking the System Design</a><time datetime="2025-08-01T04:14:07.000Z" title="Created 2025-08-01 12:14:07">2025-08-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/29/%E6%88%91%E4%B8%8E-AI-%E7%9A%84%E9%97%AE%E7%AD%94/" title="我与 AI 的问答"><img src="/img/wall-paper-113.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="我与 AI 的问答"/></a><div class="content"><a class="title" href="/2025/07/29/%E6%88%91%E4%B8%8E-AI-%E7%9A%84%E9%97%AE%E7%AD%94/" title="我与 AI 的问答">我与 AI 的问答</a><time datetime="2025-07-29T07:05:34.000Z" title="Created 2025-07-29 15:05:34">2025-07-29</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/MyBatis/" style="font-size: 1.1em; color: #999">MyBatis</a> <a href="/tags/%E8%87%AA%E6%88%91%E6%8F%90%E5%8D%87/" style="font-size: 1.1em; color: #999">自我提升</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.1em; color: #999">前端</a> <a href="/tags/ubuntu/" style="font-size: 1.1em; color: #999">ubuntu</a> <a href="/tags/%E6%8F%92%E4%BB%B6%E5%8C%96/" style="font-size: 1.1em; color: #999">插件化</a> <a href="/tags/Lombok/" style="font-size: 1.1em; color: #999">Lombok</a> <a href="/tags/Storm/" style="font-size: 1.1em; color: #999">Storm</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 1.16em; color: #999b9e">读书笔记</a> <a href="/tags/%E4%BA%9A%E9%A9%AC%E9%80%8A/" style="font-size: 1.16em; color: #999b9e">亚马逊</a> <a href="/tags/hexo/" style="font-size: 1.1em; color: #999">hexo</a> <a href="/tags/JVM/" style="font-size: 1.5em; color: #99a9bf">JVM</a> <a href="/tags/JIT/" style="font-size: 1.1em; color: #999">JIT</a> <a href="/tags/Linux/" style="font-size: 1.33em; color: #99a2af">Linux</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 1.1em; color: #999">数据分析</a> <a href="/tags/%E7%BB%8F%E6%B5%8E/" style="font-size: 1.33em; color: #99a2af">经济</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.27em; color: #99a0a9">操作系统</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/" style="font-size: 1.1em; color: #999">虚拟化</a> <a href="/tags/%E4%BA%91%E5%8E%9F%E7%94%9F/" style="font-size: 1.1em; color: #999">云原生</a> <a href="/tags/%E8%AF%BA%E5%85%B0/" style="font-size: 1.1em; color: #999">诺兰</a> <a href="/tags/SQL/" style="font-size: 1.1em; color: #999">SQL</a> <a href="/tags/git/" style="font-size: 1.1em; color: #999">git</a> <a href="/tags/%E6%94%BF%E6%B2%BB/" style="font-size: 1.1em; color: #999">政治</a> <a href="/tags/%E4%BA%BA%E7%94%9F/" style="font-size: 1.1em; color: #999">人生</a> <a href="/tags/Spring/" style="font-size: 1.44em; color: #99a7ba">Spring</a> <a href="/tags/%E6%96%87%E5%AD%A6/" style="font-size: 1.33em; color: #99a2af">文学</a> <a href="/tags/Corda/" style="font-size: 1.1em; color: #999">Corda</a> <a href="/tags/%E4%BC%9A%E8%AE%A1/" style="font-size: 1.16em; color: #999b9e">会计</a> <a href="/tags/Scala/" style="font-size: 1.21em; color: #999ea4">Scala</a> <a href="/tags/IOTA/" style="font-size: 1.1em; color: #999">IOTA</a> <a href="/tags/github/" style="font-size: 1.1em; color: #999">github</a> <a href="/tags/%E9%A2%86%E5%9F%9F%E5%BB%BA%E6%A8%A1/" style="font-size: 1.16em; color: #999b9e">领域建模</a> <a href="/tags/KOA/" style="font-size: 1.1em; color: #999">KOA</a> <a href="/tags/%E5%B9%BD%E9%BB%98/" style="font-size: 1.1em; color: #999">幽默</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.21em; color: #999ea4">数学</a> <a href="/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">推荐系统</a> <a href="/tags/%E7%AE%A1%E7%90%86/" style="font-size: 1.39em; color: #99a4b4">管理</a> <a href="/tags/FinTech/" style="font-size: 1.16em; color: #999b9e">FinTech</a> <a href="/tags/%E9%AB%98%E6%80%A7%E8%83%BD/" style="font-size: 1.1em; color: #999">高性能</a> <a href="/tags/JUnit/" style="font-size: 1.1em; color: #999">JUnit</a> <a href="/tags/%E6%95%B0%E6%8D%AE/" style="font-size: 1.1em; color: #999">数据</a></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>Archives</span>
      <a class="card-more-btn" href="/archives/"
            title="View More">
            <i class="fas fa-angle-right"></i>
          </a>
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/09/">
            <span class="card-archive-list-date">
              September 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/08/">
            <span class="card-archive-list-date">
              August 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/07/">
            <span class="card-archive-list-date">
              July 2025
            </span>
            <span class="card-archive-list-count">5</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/05/">
            <span class="card-archive-list-date">
              May 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/04/">
            <span class="card-archive-list-date">
              April 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/02/">
            <span class="card-archive-list-date">
              February 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/01/">
            <span class="card-archive-list-date">
              January 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2024/11/">
            <span class="card-archive-list-date">
              November 2024
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Website Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article Count :</div><div class="item-count">338</div></div><div class="webinfo-item"><div class="item-name">Total Word Count :</div><div class="item-count">1227.1k</div></div><div class="webinfo-item"><div class="item-name">Unique Visitors :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Page Views :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-10-22T12:10:49.448Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2017 - 2025 By magicliang</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">簡</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>