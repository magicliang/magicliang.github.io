<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>守株阁 - 一切都是守株待兔，如切如磋，如琢如磨。I am just joking.</title><meta name="author" content="magicliang"><meta name="copyright" content="magicliang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="关于技术以及人生">
<meta property="og:type" content="website">
<meta property="og:title" content="守株阁">
<meta property="og:url" content="https://magicliang.github.io/page/14/index.html">
<meta property="og:site_name" content="守株阁">
<meta property="og:description" content="关于技术以及人生">
<meta property="og:locale">
<meta property="og:image" content="https://magicliang.github.io/img/rei.jpeg">
<meta property="article:author" content="magicliang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://magicliang.github.io/img/rei.jpeg"><script type="application/ld+json"></script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://magicliang.github.io/page/14/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'undefined')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: magicliang","link":"Link: ","source":"Source: 守株阁","info":"Copyright belongs to the author. For commercial use, please contact the author for authorization. For non-commercial use, please indicate the source."}},
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '守株阁',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'home'
}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="守株阁" type="application/atom+xml">
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url(/img/eva-wallpaper.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">守株阁</span></a></span><div id="menus"></div></nav><div id="site-info"><h1 id="site-title">守株阁</h1><div id="site_social_icons"><a class="social-icon" href="https://github.com/magicliang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:magicliang@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts nc" id="recent-posts"><div class="recent-post-items"><div class="recent-post-item"><div class="post_cover left"><a href="/2021/03/18/MySQL-%E5%8E%8B%E7%BC%A9/" title="MySQL 压缩"><img class="post-bg" src="/img/wall-paper-88.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 压缩"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/18/MySQL-%E5%8E%8B%E7%BC%A9/" title="MySQL 压缩">MySQL 压缩</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-18T08:52:47.000Z" title="Created 2021-03-18 16:52:47">2021-03-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.361Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MySQL/">MySQL</a></span></div><div class="content">压缩算法 Table Compression InnoDB存储引擎是按照索引组织表（index-organized table）的方式组织数据的，数据存储在B-tree索引（clustered index/primary key &amp; secondary index）中。Table Compression是针对整个表，和相关索引进行的，而不是单独的数据行。 B-tree页经常被更新，InnoDB会尽量减少B-tree节点的分裂（split），减少不必要的压缩和解压页。为此，InnoDB在每个B-tree页中都预留了未压缩的“modification log”空间，记录页的变更。对于update和insert的数据量较小时，会先写入“modification log”，不用立刻重构整个页。当“modification log”空间用完了，InnoDB解压该页，应用变更（apply），然后重新压缩。如果压缩失败，该B-tree叶节点就要进行分裂了。在写入量比较大的场景，比如某些OLTP应用，为了避免频繁压缩失败，InnoDB会在页中保留一些额外空间（padding），在“mod...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/03/17/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" title="分库分表"><img class="post-bg" src="/img/wall-paper-151.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分库分表"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/17/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" title="分库分表">分库分表</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-17T12:44:18.000Z" title="Created 2021-03-17 20:44:18">2021-03-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.361Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="content">业界方案问题 垂直拆分 优点：降低负载，提高可用性 缺点：  无法降低单表数据量 不能无限扩容 存在单点故障 join 等多表操作受限 存在跨库事务  水平拆分 优点：  降低单表数据量 理论上可无限扩容（NoSQL 通常采取这种方案） 不存在单点故障  缺点：  join 等多表操作进一步受限 存在跨库事务 扩容成本高  如何分 hash 分表 常见的分表方案。 range 分表 建立时间 range，按 range 分表。 混合分表 先 hash，再 range。 怎么查  SQL 路由（route）和结果合并（merge） 多表 join 多维度查询 跨库事务  路由要定义 dsl，用语言解析表达式。 做广播表的查询的结果就是一张逻辑表查询转成多张表查询。 如果要做无分表键的查询，不如做影子表做侧维度。但影子表依赖于数据迁移服务。数据迁移服务的存在在日常的数据库运维中非常重要，它可以支持任意的 etl 的形式来同步异构数据。但这会带来成本上的坑。 </div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/03/15/%E8%B4%A7%E5%B8%81%E4%BB%B7%E5%80%BC%E7%9A%84%E5%8F%98%E8%BF%81/" title="货币价值的变迁"><img class="post-bg" src="/img/wall-paper-12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="货币价值的变迁"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/15/%E8%B4%A7%E5%B8%81%E4%BB%B7%E5%80%BC%E7%9A%84%E5%8F%98%E8%BF%81/" title="货币价值的变迁">货币价值的变迁</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-15T12:19:12.000Z" title="Created 2021-03-15 20:19:12">2021-03-15</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.361Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%BB%8F%E6%B5%8E/">经济</a></span></div><div class="content">FROM：https://mp.weixin.qq.com/s/QynjLKnXsix4apKn4RWh5g 1. 摆脱债务危机最简单的做法就是印钱并使其贬值 决策者可以利用以下四种杠杆来使得债务和偿债水平相对于偿债所需要的收入和现金流水平显著下降：   紧缩（减少支出）   债务违约和重组   将资金和信贷从富余方转移到短缺方（例如提高税收）   印钱并引发贬值   紧缩会造成通缩，同时由于其过于痛苦，所以不可能持久。债务违约和重组也是一个通缩和痛苦的过程，因为被抹去或贬值的债务是另一个人原本的资产。结果，违约和重组对破产债务人、和资产被剥夺债权人以及本来富有却不得不减记资产的债权人来说都是痛苦的。将资金和信贷从富余方转移到短缺方（例如：提高税收以重新分配财富）在政治上具有挑战性，但比前两种方法都更容易被接受，这通常也是解决方案的一部分。与上面其他几项措施相比，印钞是最方便，最不被大众理解，也是最普遍的债务重组方式。实际上，它看上去对大多数人其实是利大于弊，因为它有助于缓冲债务挤兑的局面，那些财富被通胀掠夺的受害方也难以分辨（尽管他们是货币和债务资产的所有者）在大多数情况下，它...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/03/15/%E8%B4%A7%E5%B8%81%E3%80%81%E4%BF%A1%E8%B4%B7%E4%B8%8E%E5%80%BA%E5%8A%A1/" title="货币、信贷与债务"><img class="post-bg" src="/img/wall-paper-62.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="货币、信贷与债务"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/15/%E8%B4%A7%E5%B8%81%E3%80%81%E4%BF%A1%E8%B4%B7%E4%B8%8E%E5%80%BA%E5%8A%A1/" title="货币、信贷与债务">货币、信贷与债务</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-15T09:21:12.000Z" title="Created 2021-03-15 17:21:12">2021-03-15</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.361Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%BB%8F%E6%B5%8E/">经济</a></span></div><div class="content">FROM：https://mp.weixin.qq.com/s/h14q5BVSSWsNgU5K6bMEVw   货币系统：大多数货币和信贷（尤其是现存的法币）并无内在价值。所有货币要么被摧毁，要么贬值。而当这发生时，财富就会以一种浩荡的方式转移，从而在经济和市场中产生巨大的反响。然而，拥有储备货币的国家更容易摆脱大量借贷（即创造信贷和债务）或者发行巨额货币的窘境，因为储备货币可用于世界各地的支出，所以其他国家倾向于持有这些债务。   经济周期由短期债务周期和长期债务周期构成   短期债务周期：通常持续8年左右，或多或少。时机取决于“兴奋剂”将需求提高到实体经济生产能力极限所需的时间。与短期债务周期相比，长债务周期需花费我们一生时间才会完成，因此大部分经济学家在内的大众根本没有意识到长期债务周期的存在。   长期债务周期：通常持续约50至75年。      拥有储备货币地位对国家意义重大，相对于美国经济规模而言，其规模是巨大的。   2008年以来，央行在MP2（QE）的基础上开启了MP3的新范式 ，这意味着具有储备货币的中央银行创造货币和信贷的能力几乎没有或没有限制。   当一...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/03/15/%E4%B8%96%E7%95%8C%E8%B4%A2%E5%AF%8C%E4%B8%8E%E6%9D%83%E5%8A%9B%E5%A4%A7%E8%BD%AC%E7%A7%BB%E8%83%8C%E5%90%8E%E7%9A%84%E8%A7%84%E5%BE%8B/" title="世界财富与权力大转移背后的规律"><img class="post-bg" src="/img/wall-paper-115.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="世界财富与权力大转移背后的规律"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/15/%E4%B8%96%E7%95%8C%E8%B4%A2%E5%AF%8C%E4%B8%8E%E6%9D%83%E5%8A%9B%E5%A4%A7%E8%BD%AC%E7%A7%BB%E8%83%8C%E5%90%8E%E7%9A%84%E8%A7%84%E5%BE%8B/" title="世界财富与权力大转移背后的规律">世界财富与权力大转移背后的规律</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-15T09:02:32.000Z" title="Created 2021-03-15 17:02:32">2021-03-15</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.361Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%BB%8F%E6%B5%8E/">经济</a></span></div><div class="content">FROM：https://mp.weixin.qq.com/s/o1lxndz0UtI_Websf-WDPw   财富和权力的大幅波动是由多达17种主要因素引起的，最重要的是货币和信贷周期，贫富差距周期和全球地缘政治周期。这些强大的力量通常以经典的周期汇聚在一起，这些经典的周期以相互补充的方式趋向于形成一个非常大的起伏周期，并在整个历史中反复出现。这个庞大的周期范式（archetypical cycle）控制着帝国的兴衰。   在多种因素引导着历史更迭和全球周期起伏，暗中发生着国家间财富和权力转移。这种转移往往会被人忽略，因为虽然财富和权力的转移在历史长河中属于白驹过隙，但对个体有限的寿命而言是长达十余年潜移默化的改变。我们如今正在经历相对财富和权力的范式迁移（archetypical big shift in relative wealth and power），并且随着这种变化，我们将见证世界秩序的深刻变化给所有国家造成的影响。   历史上，几乎所有大国都经历了崛起期、全盛期和衰弱期。而在每一个国家的周期中，不同因素的影响总是相辅相成，其中教育永远是领先指标，而储备货币地位的...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/03/15/Ray-Dalio-%E5%8F%98%E5%8C%96%E7%9A%84%E4%B8%96%E7%95%8C%E6%A0%BC%E5%B1%80%E4%B8%8E%E5%AE%8F%E8%A7%82%E5%91%A8%E6%9C%9F/" title="Ray Dalio - 变化的世界格局与宏观周期"><img class="post-bg" src="/img/wall-paper-17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ray Dalio - 变化的世界格局与宏观周期"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/15/Ray-Dalio-%E5%8F%98%E5%8C%96%E7%9A%84%E4%B8%96%E7%95%8C%E6%A0%BC%E5%B1%80%E4%B8%8E%E5%AE%8F%E8%A7%82%E5%91%A8%E6%9C%9F/" title="Ray Dalio - 变化的世界格局与宏观周期">Ray Dalio - 变化的世界格局与宏观周期</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-15T07:53:23.000Z" title="Created 2021-03-15 15:53:23">2021-03-15</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.361Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%BB%8F%E6%B5%8E/">经济</a></span></div><div class="content">FROM：https://mp.weixin.qq.com/s/zdF7d-MvpmNAj4tnxD2Cdg   为什么要关注全球历史的大趋势：每个人一生都只能够经历宏观周期中一小部分，因此时而会对长达50-70年大周期视而不见。而通常人生中最大机遇和失误，往往来自于错过了“人生中没有发生过，但在历史当中反复重演”的市场信号。   历史上重要事件由三大力量所驱动：长期货币和债务周期、国内财富与权力周期、国际财富与权力周期。三种力量往往相互融合、相互促进，共同决定了国家和全球的经济政治走势。   本系列重点关注世界舞台上长袖善舞的大国：主要包括3个储备货币国家：荷兰，英国和美国，以及其他6个重要大国：德国，法国，俄罗斯，印度，日本和中国。这些具体个例将提炼出历史反复发生的典型范例。   回看历史，有3个对经济整体趋势至关重要的事件：   经济增长困局：全球经济体的高负债率（high level of indebtedness）+低利率，将会极大程度限制全球各大央行刺激经济增长的能力；   内部冲突：各国家内部巨大的贫富差距与相应的政治分歧，带来了不断恶化的内部社会与政治冲突；   ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/03/11/MySQL-%E7%9A%84-MGR/" title="MySQL 的 MGR"><img class="post-bg" src="/img/wall-paper-112.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL 的 MGR"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/11/MySQL-%E7%9A%84-MGR/" title="MySQL 的 MGR">MySQL 的 MGR</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-11T07:38:44.000Z" title="Created 2021-03-11 15:38:44">2021-03-11</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.357Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/MySQL/">MySQL</a></span></div><div class="content">MySQL 高可用架构的历史 MySQL 自带的主从复制机制，本身并不能实现自动高可用。 早期使用开源组件来搭 MySQL 集群的方案，使用 MMHA。当代 MySQL 官方自己主推的方案是 MySQL cluster。这些老的方案，优先保证MySQL服务的持续可用，在异常切换情况下，可能出现主机上部分数据未能及时同步到从库，造成主从切换后数据丢失。但是包括金融支付在内的一些业务，对于数据库服务既要求持续可用、也要求数据强一致（可以在性能上做出一些让步）。 因此，当代的 MySQL 官方提供了组复制（MySQL Group Replication）的方案，构建了新一代的 MySQL 高可用强一致服务。 Master-Slave（MS）架构高可用概述 MS架构高可用基础 高可用MySQL是依赖复制（Replication）技术实现的，复制解决的基本问题就是，让一台数据库服务器的数据同步到其它服务器上。MySQL数据库的复制有如下三个步骤。   在主库上把数据更改记录到二进制日志（Binary Log）中（这些记录被称为二进制日志事件）。   备库将主库上的日志复制到自己的中继日志（...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/03/10/%E7%A7%92%E6%9D%80%E9%80%9A%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="秒杀通用解决方案"><img class="post-bg" src="/img/wall-paper-172.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="秒杀通用解决方案"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/10/%E7%A7%92%E6%9D%80%E9%80%9A%E7%94%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="秒杀通用解决方案">秒杀通用解决方案</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-10T14:30:13.000Z" title="Created 2021-03-10 22:30:13">2021-03-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.357Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="content">秒杀的实质 秒杀的实质，是围绕库存管理展开的并发读写 如果架构设计里面包含商品系统，包含库存，秒杀就要解决库存热点行高并发读写问题。 秒杀的底线是：不能超卖。qty库存 ≥ qty卖出 &amp;&amp; qty库存 - qty卖出 ≈ 0。 秒杀能够容忍的一些思路：渐进趋于一致，允许漏卖。 秒杀架构的特性   高性能：秒杀架构要承载的访问流量比平时高出许多倍，涉及大量的并发读和并发写，因此支持高并发访问非常关键。   一致性：秒杀活动中有限数量的商品在同一时刻被很多倍的请求同时扣减库存，在大并发更新的过程中要保证数据准确，不能发生超卖的问题（超卖，本来应该卖完下架的商品，在前台展示依然有库存，依然不停的被卖出），即库存是多少，理应卖出多少（qty库存 ≥ qty卖出 &amp;&amp; qty库存 - qty卖出 ≈ 0）。   高可用：秒杀架构虽经多次打磨优化，但现实中总难免出现一些考虑不到的情况，要保证系统的高可用，还要设计一个兜底预案，以便在最坏的情况发生时仍能从容应对。   秒杀技术难点  在有限的资源下，秒杀链路承载合理的最大流量。 大并发下扣减库存准确，“一致性...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2021/03/09/%E8%AE%A1%E7%AE%97%E7%9A%84%E6%9C%AC%E8%B4%A8/" title="计算的本质"><img class="post-bg" src="/2021/03/09/%E8%AE%A1%E7%AE%97%E7%9A%84%E6%9C%AC%E8%B4%A8/%E8%AE%A1%E7%AE%97%E7%9A%84%E6%9C%AC%E8%B4%A8.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算的本质"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/09/%E8%AE%A1%E7%AE%97%E7%9A%84%E6%9C%AC%E8%B4%A8/" title="计算的本质">计算的本质</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-09T11:03:09.000Z" title="Created 2021-03-09 19:03:09">2021-03-09</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.355Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E7%90%86%E8%AE%BA/">计算理论</a></span></div><div class="content">语义 小步语义 小步语义类似对代数式迭代求值。 大步语义 大步语义的意思是，对于大的表达式，先求它的小表达式，然后把结果结合起来得到最终的答案。这通常意味着递归 操作语义（operational semantic） 想象一个理想、抽象的计算机，操作语义为程序在某些机器上的执行定义一些规则。 指称语义（denotional semantic） 用一种低级、更形式化的语言来解释当前的语言。 状态机的分类 确定性有限自动机 finite state machine -&gt; finite automaton deterministic finite automaton 是确定性有限自动机的意思 我们的领域模型的状态机最好是这种状态机。 非确定性有限自动机 NFA 能被一台特定机器接受的字符串集合称为一种语言：我们说这台机器识别了这种语言。 任何 NFA 等价于 DFA 确定性下推自动机 PushDown Automaton pda。 这种状态机可以处理无限多的中间状态。 确定型图灵机 Deterministic Turing Machine DTM 可以解决所有可判定/可计算问题 停...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2021/03/09/%E5%85%B3%E4%BA%8E%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%9A%84typing-%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" title=" 关于编程语言的typing(一些基本概念) "><img class="post-bg" src="/img/wall-paper-19.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt=" 关于编程语言的typing(一些基本概念) "></a></div><div class="recent-post-info"><a class="article-title" href="/2021/03/09/%E5%85%B3%E4%BA%8E%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E7%9A%84typing-%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" title=" 关于编程语言的typing(一些基本概念) "> 关于编程语言的typing(一些基本概念) </a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-09T11:01:24.000Z" title="Created 2021-03-09 19:01:24">2021-03-09</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-10-22T08:01:32.355Z" title="Updated 2025-10-22 16:01:32">2025-10-22</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></span></div><div class="content">from：http://www.blogjava.net/sean/archive/2009/09/28/296825.html 最近围观一本JavaScript的书籍引发的争论，一不小心碰到一篇讲编程语言类型系统划分的帖子，回想起当年还在公司内部的Tech Session上主讲过这个话题，不过只涉及到静态/动态、强类型/弱类型，远没有这位仁兄总结的那么全面。 原文链接 http://www.reddit.com/r/programming/comments/63tnv/bruce_eckel_33104_im_over_it_java/c02qx55 不多废话，直入正题： [维度一] Static vs Dynamic Typing 静态类型和动态类型，区分的关键点为编译期或运行期确定类型：静态类型在编译期确定，动态类型在运行期确定。 静态类型代表 Java、Scala、Haskell 动态类型代表 Ruby、Python、Erlang [维度二] Strong vs Weak Typing 强类型和弱类型，区分的关键点为运行时是否自动转换到与实际类型不符的类型：强类型要求手工...</div></div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/13/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/#content-inner">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/#content-inner">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/#content-inner">34</a><a class="extend next" rel="next" href="/page/15/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/rei.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">magicliang</div><div class="author-info-description">关于技术以及人生</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">338</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">197</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/magicliang"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/magicliang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:magicliang@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">人生只是，守株待兔</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式事务"><img src="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/3pc.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式事务"/></a><div class="content"><a class="title" href="/2025/09/13/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式事务">分布式事务</a><time datetime="2025-09-13T15:06:11.000Z" title="Created 2025-09-13 23:06:11">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/13/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" title="系统设计"><img src="/img/wall-paper-150.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="系统设计"/></a><div class="content"><a class="title" href="/2025/09/13/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" title="系统设计">系统设计</a><time datetime="2025-09-13T08:07:11.000Z" title="Created 2025-09-13 16:07:11">2025-09-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/04/%E3%80%8A%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E%E3%80%8B/" title="《编程之美》"><img src="/img/wall-paper-139.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="《编程之美》"/></a><div class="content"><a class="title" href="/2025/08/04/%E3%80%8A%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E%E3%80%8B/" title="《编程之美》">《编程之美》</a><time datetime="2025-08-04T07:53:32.000Z" title="Created 2025-08-04 15:53:32">2025-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/08/01/Grokking-the-System-Design/" title="Grokking the System Design"><img src="/img/wall-paper-41.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Grokking the System Design"/></a><div class="content"><a class="title" href="/2025/08/01/Grokking-the-System-Design/" title="Grokking the System Design">Grokking the System Design</a><time datetime="2025-08-01T04:14:07.000Z" title="Created 2025-08-01 12:14:07">2025-08-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/29/%E6%88%91%E4%B8%8E-AI-%E7%9A%84%E9%97%AE%E7%AD%94/" title="我与 AI 的问答"><img src="/img/wall-paper-120.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="我与 AI 的问答"/></a><div class="content"><a class="title" href="/2025/07/29/%E6%88%91%E4%B8%8E-AI-%E7%9A%84%E9%97%AE%E7%AD%94/" title="我与 AI 的问答">我与 AI 的问答</a><time datetime="2025-07-29T07:05:34.000Z" title="Created 2025-07-29 15:05:34">2025-07-29</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" style="font-size: 1.1em; color: #999">编程语言</a> <a href="/tags/k8s/" style="font-size: 1.1em; color: #999">k8s</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84/" style="font-size: 1.1em; color: #999">软件架构</a> <a href="/tags/%E9%AB%98%E5%8F%AF%E7%94%A8/" style="font-size: 1.1em; color: #999">高可用</a> <a href="/tags/Elasticsearch/" style="font-size: 1.1em; color: #999">Elasticsearch</a> <a href="/tags/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/" style="font-size: 1.15em; color: #999b9e">性能测试</a> <a href="/tags/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8/" style="font-size: 1.15em; color: #999b9e">信息安全</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 1.2em; color: #999da3">大数据</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" style="font-size: 1.35em; color: #99a3b1">软件工程</a> <a href="/tags/Hyperledger/" style="font-size: 1.25em; color: #999fa7">Hyperledger</a> <a href="/tags/%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98/" style="font-size: 1.15em; color: #999b9e">持续交付</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/" style="font-size: 1.1em; color: #999">虚拟化</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.1em; color: #999">正则表达式</a> <a href="/tags/%E7%AE%A1%E7%90%86/" style="font-size: 1.3em; color: #99a1ac">管理</a> <a href="/tags/%E4%BB%96%E5%B1%B1%E4%B9%8B%E7%9F%B3/" style="font-size: 1.1em; color: #999">他山之石</a> <a href="/tags/%E6%8D%89%E8%99%AB/" style="font-size: 1.15em; color: #999b9e">捉虫</a> <a href="/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/" style="font-size: 1.5em; color: #99a9bf">区块链</a> <a href="/tags/%E5%B9%BD%E9%BB%98/" style="font-size: 1.1em; color: #999">幽默</a> <a href="/tags/misc/" style="font-size: 1.1em; color: #999">misc</a> <a href="/tags/%E6%80%9D%E7%BB%B4%E6%A8%A1%E5%9E%8B/" style="font-size: 1.1em; color: #999">思维模型</a> <a href="/tags/Echart/" style="font-size: 1.1em; color: #999">Echart</a> <a href="/tags/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">推荐系统</a> <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 1.15em; color: #999b9e">微服务</a> <a href="/tags/%E6%8F%92%E4%BB%B6%E5%8C%96/" style="font-size: 1.1em; color: #999">插件化</a> <a href="/tags/%E5%AD%98%E5%82%A8/" style="font-size: 1.15em; color: #999b9e">存储</a> <a href="/tags/%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size: 1.1em; color: #999">体系结构</a> <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 1.1em; color: #999">消息队列</a> <a href="/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" style="font-size: 1.15em; color: #999b9e">架构设计</a> <a href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" style="font-size: 1.1em; color: #999">程序设计</a> <a href="/tags/%E8%81%8C%E4%B8%9A%E5%8F%91%E5%B1%95/" style="font-size: 1.15em; color: #999b9e">职业发展</a> <a href="/tags/%E4%BA%92%E8%81%94%E7%BD%91%E9%87%91%E8%9E%8D/" style="font-size: 1.1em; color: #999">互联网金融</a> <a href="/tags/Idea/" style="font-size: 1.1em; color: #999">Idea</a> <a href="/tags/%E9%87%91%E8%9E%8D%E7%A7%91/" style="font-size: 1.1em; color: #999">金融科</a> <a href="/tags/JUnit/" style="font-size: 1.1em; color: #999">JUnit</a> <a href="/tags/Mac/" style="font-size: 1.1em; color: #999">Mac</a> <a href="/tags/%E6%B1%89%E8%AF%AD/" style="font-size: 1.1em; color: #999">汉语</a> <a href="/tags/%E9%87%91%E8%9E%8D/" style="font-size: 1.2em; color: #999da3">金融</a> <a href="/tags/Ethereum/" style="font-size: 1.4em; color: #99a5b6">Ethereum</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/" style="font-size: 1.1em; color: #999">项目管理</a> <a href="/tags/JVM/" style="font-size: 1.45em; color: #99a7ba">JVM</a></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>Archives</span>
      <a class="card-more-btn" href="/archives/"
            title="View More">
            <i class="fas fa-angle-right"></i>
          </a>
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/09/">
            <span class="card-archive-list-date">
              September 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/08/">
            <span class="card-archive-list-date">
              August 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/07/">
            <span class="card-archive-list-date">
              July 2025
            </span>
            <span class="card-archive-list-count">5</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/05/">
            <span class="card-archive-list-date">
              May 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/04/">
            <span class="card-archive-list-date">
              April 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/02/">
            <span class="card-archive-list-date">
              February 2025
            </span>
            <span class="card-archive-list-count">1</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/01/">
            <span class="card-archive-list-date">
              January 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2024/11/">
            <span class="card-archive-list-date">
              November 2024
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Website Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article Count :</div><div class="item-count">338</div></div><div class="webinfo-item"><div class="item-name">Total Word Count :</div><div class="item-count">1227.1k</div></div><div class="webinfo-item"><div class="item-name">Unique Visitors :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Page Views :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-10-22T11:25:59.860Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2017 - 2025 By magicliang</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Toggle Between Traditional and Simplified Chinese">簡</button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>